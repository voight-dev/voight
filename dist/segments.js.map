{
  "version": 3,
  "sources": ["../webview-ui/src/segments.js"],
  "sourcesContent": ["/**\n * Segments View JavaScript\n * Handles all interaction logic for the segments sidebar\n */\n\n(function() {\n    const vscode = acquireVsCodeApi();\n    let segments = [];\n    let displayedSegments = []; // Sorted segments in display order\n    let currentSort = 'line'; // Default sort by line number\n    let allFiles = []; // All files with segments\n    let currentFile = null; // Currently active file\n\n    // Listen for messages from extension\n    window.addEventListener('message', event => {\n        const message = event.data;\n\n        switch (message.command) {\n            case 'updateSegments':\n                segments = message.segments;\n                allFiles = message.files || [];\n                currentFile = message.currentFile || null;\n                renderSegments();\n                updateFileSelector();\n                break;\n\n            case 'showFileList':\n                renderFileList(message.files);\n                break;\n\n            case 'explanationLoading':\n                updateExplanationState(message.segmentId, 'loading', message.loading);\n                break;\n\n            case 'updateExplanation':\n                updateExplanationContent(message.segmentId, message.explanation);\n                break;\n\n            case 'explanationError':\n                updateExplanationState(message.segmentId, 'error', message.error);\n                break;\n\n            case 'contextSaved':\n                // Update local segment data and hide input without re-rendering\n                handleContextSaved(message.segmentId, message.context);\n                break;\n\n            case 'highlightSegment':\n                highlightSegmentById(message.segmentId);\n                break;\n        }\n    });\n\n    function renderSegments() {\n        const container = document.getElementById('segments-list');\n        const countEl = document.getElementById('segment-count');\n\n        // Show sort controls when rendering segments\n        const sortControls = document.querySelector('.sort-controls');\n        if (sortControls) {\n            sortControls.style.display = 'flex';\n        }\n\n        // Show/hide bulk remove button\n        const bulkRemoveBtn = document.querySelector('.bulk-remove-btn');\n        if (bulkRemoveBtn) {\n            bulkRemoveBtn.style.display = segments && segments.length > 0 ? 'flex' : 'none';\n        }\n\n        if (!segments || segments.length === 0) {\n            container.innerHTML = `\n                <div class=\"empty-state\">\n                    <div class=\"codicon codicon-inbox\"></div>\n                    <p>No segments detected yet.</p>\n                    <p style=\"margin-top: 8px; font-size: 12px;\">Segments will appear here as you work.</p>\n                </div>\n            `;\n            countEl.textContent = 'No segments';\n            return;\n        }\n\n        countEl.textContent = `${segments.length} segment${segments.length !== 1 ? 's' : ''}`;\n\n        // Sort segments based on current sort mode and store for auto-advance\n        displayedSegments = sortSegments([...segments], currentSort);\n\n        container.innerHTML = displayedSegments.map(segment => {\n            const complexityLevel = getComplexityLevel(segment.complexity);\n            const lineCount = segment.endLine - segment.startLine + 1;\n            const isNew = isSegmentNew(segment);\n            const isStarred = segment.metadata?.isStarred || false;\n\n            return `\n            <div class=\"segment-card\" data-segment-id=\"${segment.id}\" data-complexity=\"${complexityLevel}\">\n                <div class=\"segment-header\" data-clickable=\"true\">\n                    <div class=\"segment-header-left\">\n                        <div class=\"segment-title-wrapper\">\n                            <span class=\"segment-title\">${escapeHtml(segment.name)}</span>\n                            <span class=\"segment-subtitle\">\n                                ${escapeHtml(segment.lineRange || '')}\n                                ${isNew ? '<span class=\"new-badge\">NEW</span>' : ''}\n                            </span>\n                        </div>\n                    </div>\n                    <div class=\"segment-header-actions\">\n                        ${segment.metadata?.context ? `\n                        <button\n                            class=\"vk-icon-button context-indicator-btn\"\n                            title=\"Has context note\"\n                            disabled>\n                            <span class=\"codicon codicon-note\"></span>\n                        </button>\n                        ` : ''}\n                        <button\n                            class=\"vk-icon-button star-btn ${isStarred ? 'starred' : ''}\"\n                            title=\"Star for later\"\n                            data-starred=\"${isStarred}\">\n                            <span class=\"codicon codicon-star-${isStarred ? 'full' : 'empty'}\"></span>\n                        </button>\n                        <button\n                            class=\"vk-icon-button dismiss-btn\"\n                            title=\"Mark as reviewed\">\n                            <span class=\"codicon codicon-check\"></span>\n                        </button>\n                        <button\n                            class=\"vk-icon-button expand-btn\"\n                            title=\"Expand segment\"\n                            data-expanded=\"false\">\n                            <span class=\"codicon codicon-chevron-down\"></span>\n                        </button>\n                    </div>\n                </div>\n                <div class=\"segment-body\">\n                    <!-- Compact metadata badges -->\n                    <div class=\"metadata-badges\">\n                        <span class=\"metadata-badge complexity-badge-${complexityLevel}\">\n                            <span class=\"codicon codicon-pulse\"></span>\n                            <span>${segment.complexity !== null ? segment.complexity : 'N/A'}</span>\n                        </span>\n                        <span class=\"metadata-badge\">\n                            <span class=\"codicon codicon-file-code\"></span>\n                            <span>${lineCount} lines</span>\n                        </span>\n                        <span class=\"metadata-badge\" title=\"${escapeHtml(segment.filePath)}\">\n                            <span class=\"codicon codicon-folder\"></span>\n                            <span>${escapeHtml(segment.fileName)}</span>\n                        </span>\n                    </div>\n\n                    <!-- Explanation section -->\n                    <div class=\"explanation-section\" data-segment-id=\"${segment.id}\">\n                        <!-- This will be populated dynamically by JS -->\n                    </div>\n\n                    <!-- Context section (shows saved context or hidden input) -->\n                    <div class=\"context-section ${segment.metadata?.context ? 'has-content' : ''}\" data-segment-id=\"${segment.id}\">\n                        ${segment.metadata?.context ? `\n                            <div class=\"context-display\">${escapeHtml(segment.metadata.context)}</div>\n                        ` : `\n                            <div class=\"context-input-wrapper\">\n                                <textarea class=\"context-input\" placeholder=\"Add context about this code segment...\"></textarea>\n                                <div class=\"context-actions\">\n                                    <button class=\"vk-button vk-button--primary save-context-btn\">Save</button>\n                                    <button class=\"vk-button cancel-context-btn\">Cancel</button>\n                                </div>\n                            </div>\n                        `}\n                    </div>\n\n                    <!-- Action Footer -->\n                    <div class=\"action-footer\">\n                        <div class=\"action-footer-left\">\n                            <button class=\"action-icon-btn explain-btn\" title=\"Explain this code with AI\">\n                                <span class=\"codicon codicon-sparkle\"></span>\n                            </button>\n                            <button class=\"action-icon-btn note-btn\" title=\"Add a context note\">\n                                <span class=\"codicon codicon-edit\"></span>\n                            </button>\n                        </div>\n                        <button class=\"action-icon-btn reviewed-btn\" title=\"Mark as reviewed\">\n                            <span class=\"codicon codicon-check\"></span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n            `;\n        }).join('');\n    }\n\n    function toggleSegment(segmentId) {\n        const card = document.querySelector(`.segment-card[data-segment-id=\"${segmentId}\"]`);\n        if (!card) return;\n\n        const expandBtn = card.querySelector('.expand-btn');\n        const isExpanded = card.classList.contains('expanded');\n\n        if (isExpanded) {\n            // Collapse this card\n            card.classList.remove('expanded');\n            if (expandBtn) {\n                expandBtn.dataset.expanded = 'false';\n                expandBtn.title = 'Expand segment';\n            }\n        } else {\n            // Accordion behavior: collapse all other cards first\n            document.querySelectorAll('.segment-card.expanded').forEach(otherCard => {\n                if (otherCard !== card) {\n                    otherCard.classList.remove('expanded');\n                    const otherExpandBtn = otherCard.querySelector('.expand-btn');\n                    if (otherExpandBtn) {\n                        otherExpandBtn.dataset.expanded = 'false';\n                        otherExpandBtn.title = 'Expand segment';\n                    }\n                }\n            });\n\n            // Expand this card\n            card.classList.add('expanded');\n            if (expandBtn) {\n                expandBtn.dataset.expanded = 'true';\n                expandBtn.title = 'Collapse segment';\n            }\n        }\n    }\n\n    function renderFileList(files) {\n        const container = document.getElementById('segments-list');\n        const countEl = document.getElementById('segment-count');\n\n        if (!files || files.length === 0) {\n            container.innerHTML = `\n                <div class=\"empty-state\">\n                    <div class=\"codicon codicon-inbox\"></div>\n                    <p>No segments detected yet.</p>\n                    <p style=\"margin-top: 8px; font-size: 12px;\">Segments will appear here as you work.</p>\n                </div>\n            `;\n            countEl.textContent = 'No segments';\n            return;\n        }\n\n        countEl.textContent = `${files.length} file${files.length !== 1 ? 's' : ''} with segments`;\n\n        // Hide sort controls when showing file list\n        const sortControls = document.querySelector('.sort-controls');\n        if (sortControls) {\n            sortControls.style.display = 'none';\n        }\n\n        // Build file list items\n        const fileItems = files.map((file, index) => {\n            const itemDiv = document.createElement('div');\n            itemDiv.className = 'file-list-item';\n            itemDiv.dataset.fileIndex = index;\n\n            itemDiv.innerHTML = `\n                <div class=\"file-list-item-icon\">\n                    <span class=\"codicon codicon-file-code\"></span>\n                </div>\n                <div class=\"file-list-item-content\">\n                    <div class=\"file-list-item-title\">${escapeHtml(file.fileName)}</div>\n                    <div class=\"file-list-item-subtitle\">${file.segmentCount} segment${file.segmentCount !== 1 ? 's' : ''}</div>\n                </div>\n                <div class=\"file-list-item-action\">\n                    <span class=\"codicon codicon-chevron-right\"></span>\n                </div>\n            `;\n\n            // Store file path directly on the element to avoid closure issues\n            itemDiv._filePath = file.filePath;\n\n            // Add click handler directly to element\n            itemDiv.addEventListener('click', function(e) {\n                e.stopPropagation();\n                console.log('File list item clicked:', this._filePath);\n                vscode.postMessage({\n                    command: 'openFile',\n                    filePath: this._filePath\n                });\n            });\n\n            return itemDiv;\n        });\n\n        // Clear and rebuild container\n        container.innerHTML = `\n            <div class=\"file-list-header\">\n                <div class=\"codicon codicon-info\"></div>\n                <p>No segments in current file. Click a file below to view its segments:</p>\n            </div>\n        `;\n\n        // Append file items\n        fileItems.forEach(item => container.appendChild(item));\n    }\n\n    function updateFileSelector() {\n        const selectorContainer = document.getElementById('file-selector-container');\n        const selector = document.getElementById('file-selector');\n\n        if (!allFiles || allFiles.length === 0) {\n            // No files with segments - hide selector\n            if (selectorContainer) {\n                selectorContainer.style.display = 'none';\n            }\n            return;\n        }\n\n        // Show selector when there are files\n        if (selectorContainer) {\n            selectorContainer.style.display = 'block';\n        }\n\n        // Populate selector with files\n        if (selector) {\n            selector.innerHTML = allFiles.map(file => {\n                const selected = file.isActive ? 'selected' : '';\n                return `<option value=\"${escapeHtml(file.filePath)}\" ${selected}>\n                    ${escapeHtml(file.fileName)} (${file.segmentCount})\n                </option>`;\n            }).join('');\n\n            // Remove existing listener if any\n            const newSelector = selector.cloneNode(true);\n            selector.parentNode.replaceChild(newSelector, selector);\n\n            // Add change listener\n            newSelector.addEventListener('change', (e) => {\n                const selectedPath = e.target.value;\n                if (selectedPath) {\n                    vscode.postMessage({\n                        command: 'openFile',\n                        filePath: selectedPath\n                    });\n                }\n            });\n        }\n    }\n\n    function goToCode(segmentId, startLine) {\n        vscode.postMessage({\n            command: 'goToCode',\n            segmentId,\n            line: startLine\n        });\n    }\n\n    function saveContext(segmentId, context) {\n        vscode.postMessage({\n            command: 'saveContext',\n            segmentId,\n            context\n        });\n    }\n\n    /**\n     * Handle context saved confirmation from backend\n     * Updates local state and displays the saved context\n     */\n    function handleContextSaved(segmentId, context) {\n        // Update local segment data\n        const segment = segments.find(s => s.id === segmentId);\n        if (segment) {\n            if (!segment.metadata) {\n                segment.metadata = {};\n            }\n            segment.metadata.context = context;\n        }\n\n        // Find the context section and replace input with saved context display\n        const card = document.querySelector(`.segment-card[data-segment-id=\"${segmentId}\"]`);\n        if (card) {\n            const contextSection = card.querySelector('.context-section');\n            if (contextSection) {\n                // Add has-content class for styling\n                contextSection.classList.add('has-content');\n\n                // Replace content with saved context display\n                contextSection.innerHTML = `\n                    <div class=\"context-display\">${escapeHtml(context)}</div>\n                `;\n            }\n        }\n    }\n\n    function explainSegment(segmentId) {\n        vscode.postMessage({\n            command: 'explainSegment',\n            segmentId\n        });\n    }\n\n    function dismissSegment(segmentId) {\n        // Find the current segment index in the DISPLAYED (sorted) order\n        const currentIndex = displayedSegments.findIndex(s => s.id === segmentId);\n\n        // Find the card element\n        const card = document.querySelector(`.segment-card[data-segment-id=\"${segmentId}\"]`);\n        if (!card) return;\n\n        // Add dismissing class to trigger animation\n        card.classList.add('dismissing');\n\n        // Wait for animation to complete before removing from DOM and notifying backend\n        setTimeout(() => {\n            // Remove from DOM\n            card.remove();\n\n            // Remove from both arrays\n            segments = segments.filter(s => s.id !== segmentId);\n            displayedSegments = displayedSegments.filter(s => s.id !== segmentId);\n\n            // Update segment count\n            const countEl = document.getElementById('segment-count');\n            if (countEl) {\n                countEl.textContent = segments.length === 0\n                    ? 'No segments'\n                    : `${segments.length} segment${segments.length !== 1 ? 's' : ''}`;\n            }\n\n            // Notify backend\n            vscode.postMessage({\n                command: 'dismissSegment',\n                segmentId\n            });\n\n            // Auto-advance: Navigate to next segment in DISPLAY ORDER\n            if (displayedSegments.length > 0) {\n                // After removing current segment, if currentIndex >= length, wrap to 0\n                // Otherwise, currentIndex now points to what was the next segment\n                const nextIndex = currentIndex >= displayedSegments.length ? 0 : currentIndex;\n                const nextSegment = displayedSegments[nextIndex];\n\n                if (nextSegment) {\n                    // Tell backend to navigate to this segment\n                    vscode.postMessage({\n                        command: 'goToSegment',\n                        segmentId: nextSegment.id,\n                        startLine: nextSegment.startLine,\n                        endLine: nextSegment.endLine,\n                        filePath: nextSegment.filePath\n                    });\n                }\n            }\n        }, 300); // Match animation duration\n    }\n\n    function bulkRemoveSegments() {\n        // Show subtle confirmation\n        const confirmEl = document.querySelector('.bulk-remove-confirm');\n        if (!confirmEl) return;\n\n        // Show confirmation\n        confirmEl.style.display = 'flex';\n\n        // Auto-hide after 10 seconds if no action taken\n        setTimeout(() => {\n            if (confirmEl.style.display === 'flex') {\n                confirmEl.style.display = 'none';\n            }\n        }, 10000);\n    }\n\n    function confirmBulkRemove() {\n        // Get all segment IDs\n        const allSegmentIds = segments.map(s => s.id);\n\n        // Hide confirmation\n        const confirmEl = document.querySelector('.bulk-remove-confirm');\n        if (confirmEl) {\n            confirmEl.style.display = 'none';\n        }\n\n        // Animate all cards out\n        const allCards = document.querySelectorAll('.segment-card');\n        allCards.forEach(card => card.classList.add('dismissing'));\n\n        // Wait for animation then clean up\n        setTimeout(() => {\n            // Clear arrays\n            segments = [];\n            displayedSegments = [];\n\n            // Update UI\n            const countEl = document.getElementById('segment-count');\n            if (countEl) {\n                countEl.textContent = 'No segments';\n            }\n\n            // Hide bulk remove button\n            const bulkRemoveBtn = document.querySelector('.bulk-remove-btn');\n            if (bulkRemoveBtn) {\n                bulkRemoveBtn.style.display = 'none';\n            }\n\n            // Re-render to show empty state\n            renderSegments();\n\n            // Notify backend\n            vscode.postMessage({\n                command: 'bulkRemoveSegments',\n                segmentIds: allSegmentIds\n            });\n        }, 300);\n    }\n\n    function cancelBulkRemove() {\n        const confirmEl = document.querySelector('.bulk-remove-confirm');\n        if (confirmEl) {\n            confirmEl.style.display = 'none';\n        }\n    }\n\n    function toggleStar(segmentId) {\n        // Find the segment in local state\n        const segment = segments.find(s => s.id === segmentId);\n        if (!segment) return;\n\n        // Toggle the star state\n        const newStarState = !segment.metadata?.isStarred;\n        if (!segment.metadata) {\n            segment.metadata = {};\n        }\n        segment.metadata.isStarred = newStarState;\n\n        // Update UI immediately\n        const card = document.querySelector(`.segment-card[data-segment-id=\"${segmentId}\"]`);\n        if (card) {\n            const starBtn = card.querySelector('.star-btn');\n            const starIcon = starBtn?.querySelector('.codicon');\n            if (starBtn && starIcon) {\n                starBtn.dataset.starred = newStarState;\n                if (newStarState) {\n                    starBtn.classList.add('starred');\n                    starIcon.className = 'codicon codicon-star-full';\n                } else {\n                    starBtn.classList.remove('starred');\n                    starIcon.className = 'codicon codicon-star-empty';\n                }\n            }\n        }\n\n        // Notify backend\n        vscode.postMessage({\n            command: 'toggleStar',\n            segmentId,\n            isStarred: newStarState\n        });\n    }\n\n    /**\n     * Highlight a segment by ID (called when cursor is in that segment's code)\n     */\n    function highlightSegmentById(segmentId) {\n        // Remove highlight from all segments\n        document.querySelectorAll('.segment-card').forEach(card => {\n            card.classList.remove('selected');\n        });\n\n        // Add highlight to the specified segment\n        if (segmentId) {\n            const card = document.querySelector(`.segment-card[data-segment-id=\"${segmentId}\"]`);\n            if (card) {\n                card.classList.add('selected');\n            }\n        }\n    }\n\n    /**\n     * Check if a segment is new (detected within last 5 minutes)\n     */\n    function isSegmentNew(segment) {\n        if (!segment.metadata?.detectedAt) return false;\n\n        const detectedTime = new Date(segment.metadata.detectedAt).getTime();\n        const now = Date.now();\n        const fiveMinutesInMs = 5 * 60 * 1000;\n\n        return (now - detectedTime) < fiveMinutesInMs;\n    }\n\n    /**\n     * Sort segments based on selected mode\n     * Primary sort: Starred items always appear first\n     * Secondary sort: User's selected sort mode (line or complexity)\n     */\n    function sortSegments(segmentsArray, sortMode) {\n        return segmentsArray.sort((a, b) => {\n            // Primary sort: Starred items first\n            const aStarred = a.metadata?.isStarred || false;\n            const bStarred = b.metadata?.isStarred || false;\n\n            if (aStarred !== bStarred) {\n                return bStarred ? 1 : -1; // Starred items come first\n            }\n\n            // Secondary sort: Apply user's selected sort mode\n            if (sortMode === 'line') {\n                // Sort by line number (ascending)\n                if (a.filePath !== b.filePath) {\n                    return a.filePath.localeCompare(b.filePath);\n                }\n                return a.startLine - b.startLine;\n            } else if (sortMode === 'complexity') {\n                // Sort by complexity (descending - highest first)\n                const complexityA = a.complexity !== null ? a.complexity : -1;\n                const complexityB = b.complexity !== null ? b.complexity : -1;\n                return complexityB - complexityA;\n            }\n\n            return 0;\n        });\n    }\n\n    /**\n     * Update sort mode and re-render\n     */\n    function setSortMode(mode) {\n        currentSort = mode;\n\n        // Update button states\n        document.querySelectorAll('.sort-button').forEach(btn => {\n            if (btn.dataset.sort === mode) {\n                btn.classList.add('active');\n            } else {\n                btn.classList.remove('active');\n            }\n        });\n\n        // Re-render with new sort\n        renderSegments();\n    }\n\n    /**\n     * Get complexity level using traffic light system\n     * Green (0-5): Low complexity\n     * Yellow/Orange (6-10): Medium complexity\n     * Red (11+): High complexity\n     */\n    function getComplexityLevel(complexity) {\n        if (complexity === null || complexity === undefined) {\n            return 'unknown';\n        }\n        if (complexity <= 5) return 'low';      // Green\n        if (complexity <= 10) return 'medium';  // Yellow/Orange\n        return 'high';                          // Red\n    }\n\n\n    function escapeHtml(text) {\n        const div = document.createElement('div');\n        div.textContent = text;\n        return div.innerHTML;\n    }\n\n    /**\n     * Render markdown content using marked.js library\n     */\n    function renderMarkdown(markdown) {\n        if (!markdown) return '';\n\n        // Wait for marked to be loaded\n        if (typeof marked === 'undefined') {\n            console.warn('marked.js not loaded yet, returning plain text');\n            return escapeHtml(markdown);\n        }\n\n        try {\n            // Configure marked options for better rendering\n            marked.setOptions({\n                breaks: true,        // Convert \\n to <br>\n                gfm: true,          // GitHub Flavored Markdown\n                headerIds: false,   // Don't add IDs to headers\n                mangle: false       // Don't mangle email addresses\n            });\n\n            return marked.parse(markdown);\n        } catch (error) {\n            console.error('Error rendering markdown:', error);\n            return escapeHtml(markdown);\n        }\n    }\n\n    /**\n     * Update explanation section with loading/error state\n     */\n    function updateExplanationState(segmentId, state, data) {\n        const section = document.querySelector(`.explanation-section[data-segment-id=\"${segmentId}\"]`);\n        if (!section) return;\n\n        if (state === 'loading') {\n            if (data) {\n                section.className = 'explanation-section loading';\n                section.innerHTML = `\n                    <div class=\"explanation-loading\">\n                        <div class=\"loading-spinner\"></div>\n                        <span>Generating explanation...</span>\n                    </div>\n                `;\n            } else {\n                // Clear loading if data is false\n                if (!section.classList.contains('has-content')) {\n                    section.innerHTML = '';\n                    section.className = 'explanation-section';\n                }\n            }\n        } else if (state === 'error') {\n            section.className = 'explanation-section error';\n            section.innerHTML = `\n                <div class=\"explanation-error\">\n                    <span class=\"codicon codicon-warning\"></span>\n                    <div>\n                        <div>${escapeHtml(data)}</div>\n                        <div class=\"explanation-actions\">\n                            <button class=\"regenerate-btn\" data-segment-id=\"${segmentId}\">\n                                <span class=\"codicon codicon-refresh\"></span>\n                                <span>Retry</span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            `;\n        }\n    }\n\n    /**\n     * Update explanation section with content\n     */\n    function updateExplanationContent(segmentId, explanation) {\n        const section = document.querySelector(`.explanation-section[data-segment-id=\"${segmentId}\"]`);\n        if (!section) return;\n\n        section.className = 'explanation-section has-content';\n        section.innerHTML = `\n            <div class=\"explanation-header\" data-segment-id=\"${segmentId}\">\n                <div class=\"explanation-label\">\n                    <span class=\"codicon codicon-lightbulb\"></span>\n                    <span>AI Explanation</span>\n                </div>\n                <div class=\"explanation-toggle\">\n                    <button class=\"regenerate-btn\" data-segment-id=\"${segmentId}\">\n                        <span class=\"codicon codicon-refresh\"></span>\n                        <span>Regenerate</span>\n                    </button>\n                    <div class=\"collapse-icon\">\n                        <span class=\"codicon codicon-remove\"></span>\n                    </div>\n                </div>\n            </div>\n            <div class=\"explanation-body\">\n                <div class=\"explanation-content\">\n                    ${renderMarkdown(explanation)}\n                </div>\n            </div>\n        `;\n\n        // Update segment metadata for persistence\n        const segment = segments.find(function(s) { return s.id === segmentId; });\n        if (segment) {\n            if (!segment.metadata) {\n                segment.metadata = {};\n            }\n            segment.metadata.explanation = explanation;\n        }\n    }\n\n    // Event delegation for all clicks\n    document.addEventListener('click', function(e) {\n        const target = e.target;\n\n        // Handle sort buttons\n        const sortBtn = target.closest('.sort-button');\n        if (sortBtn) {\n            const sortMode = sortBtn.dataset.sort;\n            if (sortMode) {\n                e.preventDefault();\n                setSortMode(sortMode);\n            }\n            return;\n        }\n\n        // Handle title/subtitle click to navigate to code\n        const title = target.closest('.segment-title');\n        const subtitle = target.closest('.segment-subtitle');\n        if (title || subtitle) {\n            const card = target.closest('[data-segment-id]');\n            if (card) {\n                e.preventDefault();\n                e.stopPropagation();\n                const segmentId = card.dataset.segmentId;\n                const segment = segments.find(s => s.id === segmentId);\n                if (segment) {\n                    goToCode(segmentId, segment.startLine);\n                }\n            }\n            return;\n        }\n\n        // Handle header click to expand/collapse (but not if clicking on buttons or title)\n        const header = target.closest('.segment-header[data-clickable=\"true\"]');\n        if (header && !target.closest('button') && !target.closest('.segment-title') && !target.closest('.segment-subtitle')) {\n            const card = header.closest('[data-segment-id]');\n            if (card) {\n                e.preventDefault();\n                const segmentId = card.dataset.segmentId;\n                toggleSegment(segmentId);\n            }\n            return;\n        }\n\n        // Handle expand/collapse button\n        const expandBtn = target.closest('.expand-btn');\n        if (expandBtn) {\n            const segmentId = expandBtn.closest('[data-segment-id]')?.dataset.segmentId;\n            if (segmentId) {\n                e.preventDefault();\n                e.stopPropagation();\n                toggleSegment(segmentId);\n            }\n            return;\n        }\n\n        // Handle Add Context button\n        const addContextBtn = target.closest('.add-context-btn');\n        if (addContextBtn) {\n            const contextSection = addContextBtn.closest('.context-section');\n            if (contextSection) {\n                e.preventDefault();\n                const btn = contextSection.querySelector('.add-context-btn');\n                const wrapper = contextSection.querySelector('.context-input-wrapper');\n                if (btn && wrapper) {\n                    btn.style.display = 'none';\n                    wrapper.classList.add('visible');\n                    const textarea = wrapper.querySelector('.context-input');\n                    if (textarea) {\n                        setTimeout(() => textarea.focus(), 100);\n                    }\n                }\n            }\n            return;\n        }\n\n        // Handle Cancel Add Context button\n        const cancelAddContextBtn = target.closest('.cancel-add-context-btn');\n        if (cancelAddContextBtn) {\n            const contextSection = cancelAddContextBtn.closest('.context-section');\n            if (contextSection) {\n                e.preventDefault();\n                const btn = contextSection.querySelector('.add-context-btn');\n                const wrapper = contextSection.querySelector('.context-input-wrapper');\n                if (btn && wrapper) {\n                    btn.style.display = '';\n                    wrapper.classList.remove('visible');\n                    const textarea = wrapper.querySelector('.context-input');\n                    if (textarea) {\n                        textarea.value = '';\n                    }\n                }\n            }\n            return;\n        }\n\n        // Handle Save Context button\n        const saveContextBtn = target.closest('.save-context-btn');\n        if (saveContextBtn) {\n            const contextSection = saveContextBtn.closest('.context-section');\n            if (contextSection) {\n                const segmentId = contextSection.dataset.segmentId;\n                const textarea = contextSection.querySelector('.context-input');\n                if (textarea && segmentId) {\n                    e.preventDefault();\n                    saveContext(segmentId, textarea.value);\n                }\n            }\n            return;\n        }\n\n        // Handle Edit Context button\n        const editContextBtn = target.closest('.edit-context-btn');\n        if (editContextBtn) {\n            const contextSection = editContextBtn.closest('.context-section');\n            if (contextSection) {\n                const segmentId = contextSection.dataset.segmentId;\n                const segment = segments.find(s => s.id === segmentId);\n                if (segment) {\n                    e.preventDefault();\n                    contextSection.classList.remove('has-content');\n                    contextSection.innerHTML = `\n                        <div class=\"context-header\">\n                            <div class=\"context-label\">Context</div>\n                        </div>\n                        <div class=\"context-input-wrapper visible\">\n                            <textarea\n                                class=\"context-input\"\n                                placeholder=\"What does this code do? Why is it important?\"\n                                data-segment-id=\"${segmentId}\">${segment.metadata?.context || ''}</textarea>\n                            <div class=\"context-actions\">\n                                <button class=\"vk-button vk-button--secondary cancel-context-btn\">\n                                    <span>Cancel</span>\n                                </button>\n                                <button class=\"vk-button vk-button--primary save-context-btn\">\n                                    <span class=\"codicon codicon-save\"></span>\n                                    <span>Save</span>\n                                </button>\n                            </div>\n                        </div>\n                    `;\n                    const textarea = contextSection.querySelector('.context-input');\n                    if (textarea) {\n                        setTimeout(() => textarea.focus(), 100);\n                    }\n                }\n            }\n            return;\n        }\n\n        // Handle Cancel Context button\n        const cancelContextBtn = target.closest('.cancel-context-btn');\n        if (cancelContextBtn) {\n            const contextSection = cancelContextBtn.closest('.context-section');\n            if (contextSection) {\n                e.preventDefault();\n                const segmentId = contextSection.dataset.segmentId;\n                const segment = segments.find(s => s.id === segmentId);\n\n                if (segment && segment.metadata?.context) {\n                    // Restore saved context display\n                    contextSection.classList.add('has-content');\n                    contextSection.innerHTML = `\n                        <div class=\"context-display\">${escapeHtml(segment.metadata.context)}</div>\n                    `;\n                } else {\n                    // No existing context, hide the section completely\n                    contextSection.style.display = 'none';\n                    const wrapper = contextSection.querySelector('.context-input-wrapper');\n                    if (wrapper) {\n                        wrapper.classList.remove('visible');\n                        const textarea = wrapper.querySelector('.context-input');\n                        if (textarea) {\n                            textarea.value = '';\n                        }\n                    }\n                }\n            }\n            return;\n        }\n\n        // Handle Explain button (in action footer)\n        const explainBtn = target.closest('.explain-btn');\n        if (explainBtn) {\n            const card = explainBtn.closest('[data-segment-id]');\n            if (card) {\n                e.preventDefault();\n                explainSegment(card.dataset.segmentId);\n            }\n            return;\n        }\n\n        // Handle Note button (in action footer) - Edit context\n        const noteBtn = target.closest('.note-btn');\n        if (noteBtn) {\n            const card = noteBtn.closest('[data-segment-id]');\n            if (card) {\n                e.preventDefault();\n                const segmentId = card.dataset.segmentId;\n                const segment = segments.find(s => s.id === segmentId);\n\n                // First, expand the segment if it's not already expanded\n                if (!card.classList.contains('expanded')) {\n                    toggleSegment(segmentId);\n                }\n\n                // Wait a bit for expansion animation, then show context input\n                setTimeout(() => {\n                    const contextSection = card.querySelector('.context-section');\n                    if (contextSection) {\n                        // If there's saved context, show edit mode with existing text\n                        if (segment && segment.metadata?.context) {\n                            contextSection.classList.remove('has-content');\n                            contextSection.innerHTML = `\n                                <div class=\"context-input-wrapper visible\">\n                                    <textarea class=\"context-input\" placeholder=\"Add context about this code segment...\">${escapeHtml(segment.metadata.context)}</textarea>\n                                    <div class=\"context-actions\">\n                                        <button class=\"vk-button vk-button--primary save-context-btn\">Save</button>\n                                        <button class=\"vk-button cancel-context-btn\">Cancel</button>\n                                    </div>\n                                </div>\n                            `;\n                        } else {\n                            // No saved context, show empty input\n                            // First make the section visible, then show the wrapper\n                            contextSection.style.display = 'block';\n                            const wrapper = contextSection.querySelector('.context-input-wrapper');\n                            if (wrapper) {\n                                wrapper.classList.add('visible');\n                            }\n                        }\n\n                        const textarea = contextSection.querySelector('.context-input');\n                        if (textarea) {\n                            setTimeout(() => textarea.focus(), 100);\n                        }\n                    }\n                }, 150);\n            }\n            return;\n        }\n\n        // Handle Reviewed button (in action footer)\n        const reviewedBtn = target.closest('.reviewed-btn');\n        if (reviewedBtn) {\n            const card = reviewedBtn.closest('[data-segment-id]');\n            if (card) {\n                e.preventDefault();\n                const segmentId = card.dataset.segmentId;\n                dismissSegment(segmentId);\n            }\n            return;\n        }\n\n        // Handle Star button\n        const starBtn = target.closest('.star-btn');\n        if (starBtn) {\n            const card = starBtn.closest('[data-segment-id]');\n            if (card) {\n                e.preventDefault();\n                const segmentId = card.dataset.segmentId;\n                toggleStar(segmentId);\n            }\n            return;\n        }\n\n        // Handle Dismiss button\n        const dismissBtn = target.closest('.dismiss-btn');\n        if (dismissBtn) {\n            const card = dismissBtn.closest('[data-segment-id]');\n            if (card) {\n                e.preventDefault();\n                const segmentId = card.dataset.segmentId;\n                dismissSegment(segmentId);\n            }\n            return;\n        }\n\n        // Handle Regenerate explanation button\n        const regenerateBtn = target.closest('.regenerate-btn');\n        if (regenerateBtn && regenerateBtn.dataset.segmentId) {\n            e.preventDefault();\n            e.stopPropagation();\n            explainSegment(regenerateBtn.dataset.segmentId);\n            return;\n        }\n\n        // Handle Explanation collapse/expand\n        const explanationHeader = target.closest('.explanation-header');\n        if (explanationHeader) {\n            const section = explanationHeader.closest('.explanation-section');\n            if (section && section.classList.contains('has-content')) {\n                e.preventDefault();\n                section.classList.toggle('collapsed');\n\n                // Update icon\n                const icon = section.querySelector('.collapse-icon .codicon');\n                if (icon) {\n                    if (section.classList.contains('collapsed')) {\n                        icon.className = 'codicon codicon-add';\n                    } else {\n                        icon.className = 'codicon codicon-remove';\n                    }\n                }\n            }\n            return;\n        }\n\n        // Handle Bulk Remove button\n        const bulkRemoveBtn = target.closest('.bulk-remove-btn');\n        if (bulkRemoveBtn) {\n            e.preventDefault();\n            bulkRemoveSegments();\n            return;\n        }\n\n        // Handle Confirm Bulk Remove button\n        const confirmBtn = target.closest('.confirm-bulk-remove-btn');\n        if (confirmBtn) {\n            e.preventDefault();\n            confirmBulkRemove();\n            return;\n        }\n\n        // Handle Cancel Bulk Remove button\n        const cancelBtn = target.closest('.cancel-bulk-remove-btn');\n        if (cancelBtn) {\n            e.preventDefault();\n            cancelBulkRemove();\n            return;\n        }\n    });\n\n    // Request initial data\n    vscode.postMessage({ command: 'refresh' });\n})();\n"],
  "mappings": "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",
  "names": []
}
