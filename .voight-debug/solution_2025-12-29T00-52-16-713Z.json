{
  "blocks": [
    {
      "block_no": 0,
      "line_number_start": 67,
      "line_number_end": 68,
      "code": "        console.log(`[BoundaryDetector] Searching for Python function: \"${functionName}\"`);\n",
      "timestamp": "2025-12-29T01:10:23.593Z",
      "file": "/Users/swarit-dev/voight/src/detection/complexity/functionBoundaryDetector.ts"
    },
    {
      "block_no": 2,
      "line_number_start": 77,
      "line_number_end": 84,
      "code": "            // Log lines that start with \"def \" to see what's actually there\n            if (trimmed.startsWith('def ')) {\n                console.log(`[BoundaryDetector] Line ${i}: ${trimmed}`);\n            }\n\n            // Check if this is the function definition\n            if (this.isFunctionDeclaration(trimmed, functionName, Language.Python)) {\n                console.log(`[BoundaryDetector] ✓ Found match for \"${functionName}\" at line ${i}`);",
      "timestamp": "2025-12-29T01:10:23.593Z",
      "file": "/Users/swarit-dev/voight/src/detection/complexity/functionBoundaryDetector.ts"
    },
    {
      "block_no": 4,
      "line_number_start": 123,
      "line_number_end": 123,
      "code": "        console.warn(`[BoundaryDetector] ✗ Could not find Python function: \"${functionName}\"`);",
      "timestamp": "2025-12-29T01:10:23.593Z",
      "file": "/Users/swarit-dev/voight/src/detection/complexity/functionBoundaryDetector.ts"
    },
    {
      "block_no": 3,
      "line_number_start": 362,
      "line_number_end": 367,
      "code": "        // Create a map of boundaries by function name for O(1) lookup\n        const boundaryMap = new Map<string, typeof boundaries[0]>();\n        boundaries.forEach(boundary => {\n            boundaryMap.set(boundary.name, boundary);\n        });\n",
      "timestamp": "2025-12-29T01:42:07.695Z",
      "file": "/Users/swarit-dev/voight/src/detection/changeDetector.ts"
    },
    {
      "block_no": 5,
      "line_number_start": 371,
      "line_number_end": 374,
      "code": "            // Match boundary by NAME, not by index!\n            const boundary = boundaryMap.get(func.name);\n\n            Logger.debug(`[Function Splitting] Processing function \"${func.name}\": ${boundary ? `found boundary at ${boundary.startLine}-${boundary.endLine}` : 'no boundary found'}`);",
      "timestamp": "2025-12-29T01:42:07.695Z",
      "file": "/Users/swarit-dev/voight/src/detection/changeDetector.ts"
    },
    {
      "block_no": 7,
      "line_number_start": 383,
      "line_number_end": 383,
      "code": "                Logger.debug(`    ✓ Using detected boundary: lines ${functionStart}-${functionEnd}`);",
      "timestamp": "2025-12-29T01:42:07.695Z",
      "file": "/Users/swarit-dev/voight/src/detection/changeDetector.ts"
    },
    {
      "block_no": 9,
      "line_number_start": 392,
      "line_number_end": 392,
      "code": "                Logger.warn(`    ⚠️  No boundary found, using estimated range: lines ${functionStart}-${functionEnd}`);",
      "timestamp": "2025-12-29T01:42:07.695Z",
      "file": "/Users/swarit-dev/voight/src/detection/changeDetector.ts"
    },
    {
      "block_no": 7,
      "line_number_start": 65,
      "line_number_end": 73,
      "code": "            // DON'T update shadow yet - we need to detect changes first!\n            // The shadow will be updated after detectChanges is called\n            Logger.debug(`ChangeDetector: Found new file ${filePath} (hasContent: ${hasContent})`);\n\n            return hasContent; // Return true if we should detect this as new content\n        }\n\n        // Already tracked\n        Logger.debug(`ChangeDetector: File already tracked ${filePath}`);",
      "timestamp": "2025-12-29T03:54:00.933Z",
      "file": "/Users/swarit-dev/voight/src/detection/changeDetector.ts"
    },
    {
      "block_no": 8,
      "line_number_start": 116,
      "line_number_end": 130,
      "code": "        \"voight.detection.excludePatterns\": {\n          \"type\": \"array\",\n          \"default\": [\n            \"**/*.min.js\",\n            \"**/*.min.css\",\n            \"**/dist/**\",\n            \"**/build/**\",\n            \"**/node_modules/**\",\n            \"**/.git/**\"\n          ],\n          \"items\": {\n            \"type\": \"string\"\n          },\n          \"description\": \"File patterns to exclude from detection (supports glob patterns like **/*.css or **/test/**). Use ! prefix for regex (e.g., !/test\\\\d+\\\\.js$/)\"\n        },",
      "timestamp": "2025-12-29T04:23:22.122Z",
      "file": "/Users/swarit-dev/voight/package.json"
    },
    {
      "block_no": 9,
      "line_number_start": 6,
      "line_number_end": 6,
      "code": "import { FilePatternMatcher } from '../utils/filePatternMatcher';",
      "timestamp": "2025-12-29T04:38:04.787Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 11,
      "line_number_start": 17,
      "line_number_end": 17,
      "code": "    private _filePatternMatcher: FilePatternMatcher;",
      "timestamp": "2025-12-29T04:38:04.787Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 13,
      "line_number_start": 27,
      "line_number_end": 27,
      "code": "        this._filePatternMatcher = new FilePatternMatcher();",
      "timestamp": "2025-12-29T04:38:04.787Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 12,
      "line_number_start": 41,
      "line_number_end": 46,
      "code": "        // Check if file should be excluded\n        if (this._filePatternMatcher.shouldExclude(document.fileName)) {\n            Logger.debug(`DetectionCoordinator: File excluded by pattern: ${document.fileName}`);\n            return;\n        }\n",
      "timestamp": "2025-12-29T04:38:19.046Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 13,
      "line_number_start": 99,
      "line_number_end": 105,
      "code": "\n        // Check if file should be excluded\n        if (this._filePatternMatcher.shouldExclude(filePath)) {\n            Logger.debug(`DetectionCoordinator: Change event ignored for excluded file: ${filePath}`);\n            return;\n        }\n",
      "timestamp": "2025-12-29T04:38:36.061Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 14,
      "line_number_start": 63,
      "line_number_end": 68,
      "code": "        // Show/hide bulk remove button\n        const bulkRemoveBtn = document.querySelector('.bulk-remove-btn');\n        if (bulkRemoveBtn) {\n            bulkRemoveBtn.style.display = segments && segments.length > 0 ? 'flex' : 'none';\n        }\n",
      "timestamp": "2025-12-29T20:16:53.012Z",
      "file": "/Users/swarit-dev/voight/webview-ui/src/segments.js"
    },
    {
      "block_no": 15,
      "line_number_start": 447,
      "line_number_end": 512,
      "code": "    function bulkRemoveSegments() {\n        // Show subtle confirmation\n        const confirmEl = document.querySelector('.bulk-remove-confirm');\n        if (!confirmEl) return;\n\n        // Show confirmation\n        confirmEl.style.display = 'flex';\n\n        // Auto-hide after 10 seconds if no action taken\n        setTimeout(() => {\n            if (confirmEl.style.display === 'flex') {\n                confirmEl.style.display = 'none';\n            }\n        }, 10000);\n    }\n\n    function confirmBulkRemove() {\n        // Get all segment IDs\n        const allSegmentIds = segments.map(s => s.id);\n\n        // Hide confirmation\n        const confirmEl = document.querySelector('.bulk-remove-confirm');\n        if (confirmEl) {\n            confirmEl.style.display = 'none';\n        }\n\n        // Animate all cards out\n        const allCards = document.querySelectorAll('.segment-card');\n        allCards.forEach(card => card.classList.add('dismissing'));\n\n        // Wait for animation then clean up\n        setTimeout(() => {\n            // Clear arrays\n            segments = [];\n            displayedSegments = [];\n\n            // Update UI\n            const countEl = document.getElementById('segment-count');\n            if (countEl) {\n                countEl.textContent = 'No segments';\n            }\n\n            // Hide bulk remove button\n            const bulkRemoveBtn = document.querySelector('.bulk-remove-btn');\n            if (bulkRemoveBtn) {\n                bulkRemoveBtn.style.display = 'none';\n            }\n\n            // Re-render to show empty state\n            renderSegments();\n\n            // Notify backend\n            vscode.postMessage({\n                command: 'bulkRemoveSegments',\n                segmentIds: allSegmentIds\n            });\n        }, 300);\n    }\n\n    function cancelBulkRemove() {\n        const confirmEl = document.querySelector('.bulk-remove-confirm');\n        if (confirmEl) {\n            confirmEl.style.display = 'none';\n        }\n    }\n",
      "timestamp": "2025-12-29T20:17:21.695Z",
      "file": "/Users/swarit-dev/voight/webview-ui/src/segments.js"
    },
    {
      "block_no": 16,
      "line_number_start": 1073,
      "line_number_end": 1096,
      "code": "\n        // Handle Bulk Remove button\n        const bulkRemoveBtn = target.closest('.bulk-remove-btn');\n        if (bulkRemoveBtn) {\n            e.preventDefault();\n            bulkRemoveSegments();\n            return;\n        }\n\n        // Handle Confirm Bulk Remove button\n        const confirmBtn = target.closest('.confirm-bulk-remove-btn');\n        if (confirmBtn) {\n            e.preventDefault();\n            confirmBulkRemove();\n            return;\n        }\n\n        // Handle Cancel Bulk Remove button\n        const cancelBtn = target.closest('.cancel-bulk-remove-btn');\n        if (cancelBtn) {\n            e.preventDefault();\n            cancelBulkRemove();\n            return;\n        }",
      "timestamp": "2025-12-29T20:17:40.849Z",
      "file": "/Users/swarit-dev/voight/webview-ui/src/segments.js"
    },
    {
      "block_no": 17,
      "line_number_start": 713,
      "line_number_end": 735,
      "code": "                <div class=\"header-actions\">\n                    <button class=\"bulk-remove-btn\" style=\"display: none;\" title=\"Remove all segments\">\n                        <span class=\"codicon codicon-trash\"></span>\n                    </button>\n                    <div class=\"sort-controls\">\n                        <button class=\"sort-button active\" data-sort=\"line\" title=\"Sort by line number\">\n                            <span class=\"codicon codicon-list-ordered\"></span>\n                        </button>\n                        <button class=\"sort-button\" data-sort=\"complexity\" title=\"Sort by complexity\">\n                            <span class=\"codicon codicon-graph\"></span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <div class=\"bulk-remove-confirm\" style=\"display: none;\">\n                <div class=\"bulk-remove-confirm-content\">\n                    <span class=\"bulk-remove-confirm-text\">Remove all segments?</span>\n                    <div class=\"bulk-remove-confirm-actions\">\n                        <button class=\"confirm-bulk-remove-btn\">Remove</button>\n                        <button class=\"cancel-bulk-remove-btn\">Cancel</button>\n                    </div>\n                </div>\n            </div>",
      "timestamp": "2025-12-29T20:18:02.665Z",
      "file": "/Users/swarit-dev/voight/src/ui/segmentsWebviewProvider.ts"
    },
    {
      "block_no": 18,
      "line_number_start": 193,
      "line_number_end": 220,
      "code": "\n                case 'bulkRemoveSegments':\n                    if (message.segmentIds && Array.isArray(message.segmentIds)) {\n                        Logger.debug(`[SegmentsWebviewProvider] Bulk removing ${message.segmentIds.length} segments`);\n\n                        // Remove all segments\n                        for (const segmentId of message.segmentIds) {\n                            const block = this._blockManager.getBlock(segmentId);\n                            if (block) {\n                                // Check if segment has star or context - preserve if yes\n                                const hasContext = block.metadata?.context && block.metadata.context.trim().length > 0;\n                                const isStarred = block.metadata?.isStarred === true;\n\n                                if (hasContext || isStarred) {\n                                    // Mark as reviewed but keep the segment\n                                    this._blockManager.markAsReviewed(segmentId);\n                                } else {\n                                    // No star or context - remove completely\n                                    this._blockManager.remove(segmentId);\n                                }\n                            }\n                        }\n\n                        // Update badge after bulk removal\n                        this._updateBadge();\n                        Logger.info(`[SegmentsWebviewProvider] Bulk removal complete`);\n                    }\n                    break;",
      "timestamp": "2025-12-29T20:18:21.894Z",
      "file": "/Users/swarit-dev/voight/src/ui/segmentsWebviewProvider.ts"
    },
    {
      "block_no": 19,
      "line_number_start": 85,
      "line_number_end": 90,
      "code": "/* Header actions - contains bulk remove button and sort controls */\n.header-actions {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}",
      "timestamp": "2025-12-29T20:19:03.046Z",
      "file": "/Users/swarit-dev/voight/src/webview-ui/styles/base/segments.css"
    },
    {
      "block_no": 21,
      "line_number_start": 91,
      "line_number_end": 96,
      "code": "\n/* Bulk remove button - subtle, minimal design */\n.bulk-remove-btn {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;",
      "timestamp": "2025-12-29T20:19:03.046Z",
      "file": "/Users/swarit-dev/voight/src/webview-ui/styles/base/segments.css"
    },
    {
      "block_no": 23,
      "line_number_start": 97,
      "line_number_end": 102,
      "code": "    padding: 6px 10px;\n    background: transparent;\n    color: var(--vscode-descriptionForeground);\n    border: 1px solid var(--vscode-panel-border);\n    border-radius: 4px;\n    cursor: pointer;",
      "timestamp": "2025-12-29T20:19:03.046Z",
      "file": "/Users/swarit-dev/voight/src/webview-ui/styles/base/segments.css"
    },
    {
      "block_no": 25,
      "line_number_start": 103,
      "line_number_end": 108,
      "code": "    transition: all 0.15s ease;\n    opacity: 0.6;\n}\n\n.bulk-remove-btn:hover {\n    opacity: 1;",
      "timestamp": "2025-12-29T20:19:03.046Z",
      "file": "/Users/swarit-dev/voight/src/webview-ui/styles/base/segments.css"
    },
    {
      "block_no": 27,
      "line_number_start": 109,
      "line_number_end": 114,
      "code": "    background: var(--vscode-inputValidation-errorBackground);\n    color: var(--vscode-errorForeground);\n    border-color: var(--vscode-inputValidation-errorBorder);\n}\n\n.bulk-remove-btn .codicon {",
      "timestamp": "2025-12-29T20:19:03.046Z",
      "file": "/Users/swarit-dev/voight/src/webview-ui/styles/base/segments.css"
    },
    {
      "block_no": 29,
      "line_number_start": 115,
      "line_number_end": 120,
      "code": "    font-size: 14px;\n}\n\n/* Bulk remove confirmation - subtle inline notification */\n.bulk-remove-confirm {\n    margin-top: 10px;",
      "timestamp": "2025-12-29T20:19:03.046Z",
      "file": "/Users/swarit-dev/voight/src/webview-ui/styles/base/segments.css"
    },
    {
      "block_no": 31,
      "line_number_start": 121,
      "line_number_end": 126,
      "code": "    padding: 10px 12px;\n    background: var(--vscode-inputValidation-warningBackground);\n    border: 1px solid var(--vscode-inputValidation-warningBorder);\n    border-radius: 4px;\n    animation: slideDown 0.2s ease;\n}",
      "timestamp": "2025-12-29T20:19:03.046Z",
      "file": "/Users/swarit-dev/voight/src/webview-ui/styles/base/segments.css"
    },
    {
      "block_no": 33,
      "line_number_start": 127,
      "line_number_end": 132,
      "code": "\n.bulk-remove-confirm-content {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    gap: 12px;",
      "timestamp": "2025-12-29T20:19:03.046Z",
      "file": "/Users/swarit-dev/voight/src/webview-ui/styles/base/segments.css"
    },
    {
      "block_no": 35,
      "line_number_start": 133,
      "line_number_end": 138,
      "code": "}\n\n.bulk-remove-confirm-text {\n    font-size: 12px;\n    color: var(--vscode-inputValidation-warningForeground);\n    font-weight: 500;",
      "timestamp": "2025-12-29T20:19:03.046Z",
      "file": "/Users/swarit-dev/voight/src/webview-ui/styles/base/segments.css"
    },
    {
      "block_no": 37,
      "line_number_start": 139,
      "line_number_end": 144,
      "code": "}\n\n.bulk-remove-confirm-actions {\n    display: flex;\n    gap: 6px;\n}",
      "timestamp": "2025-12-29T20:19:03.046Z",
      "file": "/Users/swarit-dev/voight/src/webview-ui/styles/base/segments.css"
    },
    {
      "block_no": 39,
      "line_number_start": 145,
      "line_number_end": 150,
      "code": "\n.confirm-bulk-remove-btn,\n.cancel-bulk-remove-btn {\n    padding: 4px 10px;\n    font-size: 11px;\n    font-weight: 500;",
      "timestamp": "2025-12-29T20:19:03.046Z",
      "file": "/Users/swarit-dev/voight/src/webview-ui/styles/base/segments.css"
    },
    {
      "block_no": 41,
      "line_number_start": 151,
      "line_number_end": 156,
      "code": "    border: none;\n    border-radius: 3px;\n    cursor: pointer;\n    transition: all 0.15s ease;\n}\n",
      "timestamp": "2025-12-29T20:19:03.046Z",
      "file": "/Users/swarit-dev/voight/src/webview-ui/styles/base/segments.css"
    },
    {
      "block_no": 43,
      "line_number_start": 157,
      "line_number_end": 162,
      "code": ".confirm-bulk-remove-btn {\n    background: var(--vscode-button-background);\n    color: var(--vscode-button-foreground);\n}\n\n.confirm-bulk-remove-btn:hover {",
      "timestamp": "2025-12-29T20:19:03.046Z",
      "file": "/Users/swarit-dev/voight/src/webview-ui/styles/base/segments.css"
    },
    {
      "block_no": 45,
      "line_number_start": 163,
      "line_number_end": 174,
      "code": "    background: var(--vscode-button-hoverBackground);\n}\n\n.cancel-bulk-remove-btn {\n    background: var(--vscode-button-secondaryBackground);\n    color: var(--vscode-button-secondaryForeground);\n}\n\n.cancel-bulk-remove-btn:hover {\n    background: var(--vscode-button-secondaryHoverBackground);\n}\n",
      "timestamp": "2025-12-29T20:19:03.046Z",
      "file": "/Users/swarit-dev/voight/src/webview-ui/styles/base/segments.css"
    }
  ],
  "metadata": {
    "session": "2025-12-29T00-52-16-713Z",
    "totalBlocks": 33,
    "lastUpdated": "2025-12-29T20:19:03.049Z"
  }
}