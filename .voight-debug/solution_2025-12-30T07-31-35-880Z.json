{
  "blocks": [
    {
      "block_no": 0,
      "line_number_start": 72,
      "line_number_end": 91,
      "code": "     * Initialize tracking for a newly created file\n     * Sets shadow state to EMPTY so all content is detected as AI-generated\n     */\n    public initializeNewFile(filePath: string): void {\n        if (!this._shadowDocuments.has(filePath)) {\n            // Initialize shadow state as empty document\n            // This ensures all content in the new file is detected as AI-generated\n            const emptySnapshot: DocumentSnapshot = {\n                lines: [],\n                version: 0,\n                timestamp: Date.now()\n            };\n            this._shadowDocuments.set(filePath, emptySnapshot);\n            Logger.info(`ChangeDetector: Initialized NEW FILE with empty shadow state: ${filePath}`);\n        } else {\n            Logger.debug(`ChangeDetector: File already tracked ${filePath}`);\n        }\n    }\n\n    /**",
      "timestamp": "2025-12-30T07:35:22.178Z",
      "file": "/Users/swarit-dev/voight/src/detection/changeDetector.ts"
    },
    {
      "block_no": 1,
      "line_number_start": 7,
      "line_number_end": 7,
      "code": "import { FileRegistry } from '../tracking/fileRegistry';",
      "timestamp": "2025-12-30T07:35:38.157Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 3,
      "line_number_start": 19,
      "line_number_end": 22,
      "code": "    private _fileRegistry: FileRegistry;\n\n    constructor(\n        fileRegistry: FileRegistry,",
      "timestamp": "2025-12-30T07:35:38.157Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 5,
      "line_number_start": 31,
      "line_number_end": 31,
      "code": "        this._fileRegistry = fileRegistry;",
      "timestamp": "2025-12-30T07:35:38.157Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 4,
      "line_number_start": 73,
      "line_number_end": 82,
      "code": "        // Check if this is a NEW file that wasn't tracked at startup\n        const isNewFile = !this._fileRegistry.isKnown(filePath);\n        if (isNewFile) {\n            Logger.info(`DetectionCoordinator: NEW FILE DETECTED - ${filePath}`);\n            // Initialize with empty shadow state so all content is detected\n            this._changeDetector.initializeNewFile(filePath);\n            // Register as known so we don't treat it as new again\n            this._fileRegistry.register(filePath);\n        }\n",
      "timestamp": "2025-12-30T07:36:01.418Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 6,
      "line_number_start": 86,
      "line_number_end": 88,
      "code": "        if (isNewFile) {\n            Logger.debug(`Status: NEW FILE - will detect all content`);\n        }",
      "timestamp": "2025-12-30T07:36:01.418Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 6,
      "line_number_start": 14,
      "line_number_end": 14,
      "code": "import { FileRegistry } from './tracking/fileRegistry';",
      "timestamp": "2025-12-30T07:36:19.409Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 8,
      "line_number_start": 21,
      "line_number_end": 21,
      "code": "let fileRegistry: FileRegistry;",
      "timestamp": "2025-12-30T07:36:19.409Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 8,
      "line_number_start": 61,
      "line_number_end": 65,
      "code": "\t// Initialize file registry to track existing files\n\tfileRegistry = new FileRegistry();\n\tawait fileRegistry.initialize(workspaceRoot);\n\tLogger.info(`File registry initialized with ${fileRegistry.getCount()} files`);\n",
      "timestamp": "2025-12-30T07:36:36.497Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 10,
      "line_number_start": 96,
      "line_number_end": 97,
      "code": "\t// Initialize detection coordinator with file registry, UI and optional debug integration\n\tcoordinator = new DetectionCoordinator(fileRegistry, blockManager, debugLogger);",
      "timestamp": "2025-12-30T07:36:36.497Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 10,
      "line_number_start": 51,
      "line_number_end": 56,
      "code": "        // Register file with registry if not already known\n        if (!this._fileRegistry.isKnown(document.fileName)) {\n            this._fileRegistry.register(document.fileName);\n            Logger.debug(`DetectionCoordinator: Registered newly opened file: ${document.fileName}`);\n        }\n",
      "timestamp": "2025-12-30T07:36:47.877Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 11,
      "line_number_start": 30,
      "line_number_end": 37,
      "code": "\n\t// Get extension version from package.json\n\tconst extension = vscode.extensions.getExtension('undefined_publisher.voight');\n\tconst version = extension?.packageJSON?.version || 'unknown';\n\n\tLogger.info(`=== Voight v${version} ===`);\n\tLogger.info(`Debug mode: ${debugMode ? 'ENABLED' : 'DISABLED'}`);\n\tLogger.info(`Extension activated`);",
      "timestamp": "2025-12-30T07:46:35.482Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 12,
      "line_number_start": 51,
      "line_number_end": 63,
      "code": "        // Check if this is a file that existed at startup\n        const isKnownFile = this._fileRegistry.isKnown(document.fileName);\n\n        if (isKnownFile) {\n            // File existed at startup - initialize shadow state to current content\n            // This prevents treating existing file content as AI-generated\n            this._changeDetector.initializeDocument(document);\n            Logger.info(`DetectionCoordinator: Initialized tracking for existing file: ${document.fileName}`);\n        } else {\n            // File was NOT in workspace at startup - this is a NEW file\n            // Don't register it yet, let analyzeEvent handle it on first edit\n            Logger.info(`DetectionCoordinator: Detected unopened new file (will track on first edit): ${document.fileName}`);\n        }",
      "timestamp": "2025-12-30T07:47:02.702Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 13,
      "line_number_start": 86,
      "line_number_end": 86,
      "code": "            Logger.info(`ðŸ†• NEW FILE DETECTED - ${filePath}`);",
      "timestamp": "2025-12-30T07:53:23.963Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 15,
      "line_number_start": 93,
      "line_number_end": 106,
      "code": "        Logger.info(`\\n=== Document Change Event ===`);\n        Logger.info(`File: ${filePath}`);\n        Logger.info(`Total chunks: ${event.contentChanges.length}`);\n        if (isNewFile) {\n            Logger.info(`Status: âœ¨ NEW FILE - will detect all content`);\n        }\n\n        // Log details about each change chunk\n        event.contentChanges.forEach((change, idx) => {\n            const preview = change.text.substring(0, 100).replace(/\\n/g, '\\\\n');\n            Logger.debug(`  Chunk ${idx + 1}: ${change.text.length} chars, range: ${change.range.start.line}:${change.range.start.character}-${change.range.end.line}:${change.range.end.character}`);\n            Logger.debug(`    Preview: \"${preview}${change.text.length > 100 ? '...' : ''}\"`);\n        });\n",
      "timestamp": "2025-12-30T07:53:23.964Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 15,
      "line_number_start": 120,
      "line_number_end": 123,
      "code": "            Logger.info(`âŒ Not detected as paste operation - skipping block detection`);\n            if (isNewFile) {\n                Logger.warn(`âš ï¸  NEW FILE but not paste! This means the content won't be tracked. Consider manual review.`);\n            }",
      "timestamp": "2025-12-30T07:53:43.352Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 17,
      "line_number_start": 127,
      "line_number_end": 127,
      "code": "        Logger.info('âœ… Paste detected - analyzing changes...');",
      "timestamp": "2025-12-30T07:53:43.352Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 17,
      "line_number_start": 31,
      "line_number_end": 31,
      "code": "\t// Get extension version and running mode",
      "timestamp": "2025-12-30T07:55:46.261Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 19,
      "line_number_start": 35,
      "line_number_end": 53,
      "code": "\t// Determine if we're running in development/debug mode (F5) or packaged mode\n\tconst extensionMode = context.extensionMode;\n\tlet modeString = 'Unknown';\n\n\tswitch (extensionMode) {\n\t\tcase vscode.ExtensionMode.Production:\n\t\t\tmodeString = 'Production (Packaged VSIX)';\n\t\t\tbreak;\n\t\tcase vscode.ExtensionMode.Development:\n\t\t\tmodeString = 'Development (F5 Debug)';\n\t\t\tbreak;\n\t\tcase vscode.ExtensionMode.Test:\n\t\t\tmodeString = 'Test Mode';\n\t\t\tbreak;\n\t}\n\n\tLogger.info(`=== Voight v${version} ===`);\n\tLogger.info(`Extension mode: ${modeString}`);\n\tLogger.info(`Debug logging: ${debugMode ? 'ENABLED' : 'DISABLED'}`);",
      "timestamp": "2025-12-30T07:55:46.261Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 19,
      "line_number_start": 86,
      "line_number_end": 86,
      "code": "            Logger.info(`NEW FILE DETECTED - ${filePath}`);",
      "timestamp": "2025-12-30T07:56:14.546Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 21,
      "line_number_start": 97,
      "line_number_end": 97,
      "code": "            Logger.info(`Status: NEW FILE - will detect all content`);",
      "timestamp": "2025-12-30T07:56:14.546Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 21,
      "line_number_start": 120,
      "line_number_end": 127,
      "code": "            Logger.info(`NOT detected as paste operation - skipping block detection`);\n            if (isNewFile) {\n                Logger.warn(`WARNING: NEW FILE but not paste! This means the content won't be tracked. Consider manual review.`);\n            }\n            return;\n        }\n\n        Logger.info('PASTE DETECTED - analyzing changes...');",
      "timestamp": "2025-12-30T07:56:23.332Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 22,
      "line_number_start": 138,
      "line_number_end": 163,
      "code": "\t// Watch for files created on disk (by AI tools, external processes, etc.)\n\tconst fileSystemWatcher = vscode.workspace.createFileSystemWatcher('**/*');\n\tconst fileCreateListener = fileSystemWatcher.onDidCreate(async (uri) => {\n\t\tif (uri.scheme !== 'file') {\n\t\t\treturn;\n\t\t}\n\n\t\tLogger.info(`File system: New file created on disk - ${uri.fsPath}`);\n\n\t\t// Check if file is already known\n\t\tif (!fileRegistry.isKnown(uri.fsPath)) {\n\t\t\tLogger.info(`File system: This is a NEW file, will track its content`);\n\n\t\t\t// Open the file to read its content\n\t\t\ttry {\n\t\t\t\tconst document = await vscode.workspace.openTextDocument(uri);\n\n\t\t\t\t// Treat the entire file as AI-generated\n\t\t\t\tLogger.info(`File system: Processing new file with ${document.lineCount} lines`);\n\t\t\t\tcoordinator.handleNewFileCreated(document);\n\t\t\t} catch (error) {\n\t\t\t\tLogger.warn(`File system: Failed to open new file: ${error}`);\n\t\t\t}\n\t\t}\n\t});\n",
      "timestamp": "2025-12-30T08:01:17.563Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 23,
      "line_number_start": 190,
      "line_number_end": 257,
      "code": "     * Handle a new file that was created on disk (by AI tools, external processes, etc.)\n     * This bypasses paste detection and directly processes the file content\n     */\n    public handleNewFileCreated(document: vscode.TextDocument): void {\n        const filePath = document.fileName;\n\n        Logger.info(`\\n=== New File Created on Disk ===`);\n        Logger.info(`File: ${filePath}`);\n        Logger.info(`Lines: ${document.lineCount}`);\n\n        // Check if file should be excluded\n        if (this._filePatternMatcher.shouldExclude(filePath)) {\n            Logger.debug(`DetectionCoordinator: File excluded by pattern: ${filePath}`);\n            return;\n        }\n\n        // Check if this is truly a new file\n        const isNewFile = !this._fileRegistry.isKnown(filePath);\n        if (!isNewFile) {\n            Logger.debug(`DetectionCoordinator: File already known, skipping`);\n            return;\n        }\n\n        Logger.info(`NEW FILE DETECTED - ${filePath}`);\n\n        // Initialize with empty shadow state so all content is detected\n        this._changeDetector.initializeNewFile(filePath);\n\n        // Register as known so we don't treat it as new again\n        this._fileRegistry.register(filePath);\n\n        // Detect changed blocks - this will detect all content since shadow is empty\n        const blocks = this._changeDetector.detectChanges(document);\n\n        if (blocks.length === 0) {\n            Logger.warn(`No blocks detected in new file - file may be empty or whitespace-only`);\n            return;\n        }\n\n        Logger.info(`Detected ${blocks.length} code blocks in new file`);\n\n        // Register with UI\n        if (this._blockManager) {\n            blocks.forEach((block, idx) => {\n                const blockId = this._blockManager!.registerDetectedBlock(\n                    filePath,\n                    block.startLine,\n                    block.endLine,\n                    {\n                        blockNo: idx,\n                        detectedAt: block.timestamp,\n                        linesChanged: block.endLine - block.startLine + 1,\n                        coreChangeStart: block.coreChangeStart,\n                        coreChangeEnd: block.coreChangeEnd,\n                        expandedContext: block.expandedContext,\n                        complexityScore: block.complexityScore,\n                        complexityData: block.complexityData,\n                        functions: block.functions\n                    }\n                );\n                Logger.debug(`  âœ“ Registered ${blockId} with UI`);\n            });\n        }\n\n        Logger.info(`=== File Processing Complete ===\\n`);\n    }\n\n    /**",
      "timestamp": "2025-12-30T08:01:51.233Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 24,
      "line_number_start": 376,
      "line_number_end": 377,
      "code": "\t\tfileSystemWatcher,\n\t\tfileCreateListener,",
      "timestamp": "2025-12-30T08:02:13.503Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 25,
      "line_number_start": 151,
      "line_number_end": 166,
      "code": "\t\t\t// Wait a brief moment to see if user is actively editing this file\n\t\t\t// If they are, let normal paste detection handle it instead\n\t\t\tawait new Promise(resolve => setTimeout(resolve, 500));\n\n\t\t\t// Check if there's an active editor for this file\n\t\t\tconst activeEditor = vscode.window.activeTextEditor;\n\t\t\tconst isActivelyEditing = activeEditor?.document.uri.fsPath === uri.fsPath;\n\n\t\t\tif (isActivelyEditing) {\n\t\t\t\tLogger.info(`File system: User is actively editing this file - will use normal paste detection`);\n\t\t\t\t// Register the file so it's known, but don't process it yet\n\t\t\t\t// Normal paste detection will handle subsequent edits\n\t\t\t\tfileRegistry.register(uri.fsPath);\n\t\t\t\treturn;\n\t\t\t}\n",
      "timestamp": "2025-12-30T08:03:59.001Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 26,
      "line_number_start": 149,
      "line_number_end": 149,
      "code": "\t\t\tLogger.info(`File system: This is a NEW file - marking for tracking`);",
      "timestamp": "2025-12-30T08:11:37.741Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 28,
      "line_number_start": 159,
      "line_number_end": 160,
      "code": "\t\t\t\tLogger.info(`File system: User is actively editing - will use normal paste detection`);\n\t\t\t\t// Don't register yet - let initializeDocument handle it",
      "timestamp": "2025-12-30T08:11:37.741Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 30,
      "line_number_start": 164,
      "line_number_end": 167,
      "code": "\t\t\t// File was created by AI/external tool and not actively being edited\n\t\t\t// Mark it as a \"pending new file\" that should be fully tracked when opened\n\t\t\tLogger.info(`File system: Marking as AI-generated file (will process when opened)`);\n\t\t\t// Don't register it - this keeps it \"unknown\" so initializeDocument will handle it specially",
      "timestamp": "2025-12-30T08:11:37.741Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 29,
      "line_number_start": 61,
      "line_number_end": 63,
      "code": "            // Process it as AI-generated content\n            Logger.info(`DetectionCoordinator: NEW FILE opened - will process entire content: ${document.fileName}`);\n            this.handleNewFileCreated(document);",
      "timestamp": "2025-12-30T08:11:53.282Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 30,
      "line_number_start": 108,
      "line_number_end": 110,
      "code": "     *\n     * Includes deduplication: if a segment with the same file path and line range\n     * already exists, returns the existing segment ID instead of creating a duplicate",
      "timestamp": "2025-12-30T08:15:49.147Z",
      "file": "/Users/swarit-dev/voight/src/ui/blockManager.ts"
    },
    {
      "block_no": 32,
      "line_number_start": 118,
      "line_number_end": 126,
      "code": "        // Check for existing segment with same file path and line range\n        const existingSegment = this._findDuplicateSegment(filePath, startLine, endLine);\n\n        if (existingSegment) {\n            Logger.warn(`Duplicate segment detected: ${filePath}:${startLine}-${endLine} (existing: ${existingSegment.id})`);\n            Logger.debug(`Skipping duplicate - using existing segment ${existingSegment.id}`);\n            return existingSegment.id;\n        }\n",
      "timestamp": "2025-12-30T08:15:49.147Z",
      "file": "/Users/swarit-dev/voight/src/ui/blockManager.ts"
    },
    {
      "block_no": 34,
      "line_number_start": 168,
      "line_number_end": 185,
      "code": "     * Find a duplicate segment with the same file path and line range\n     * Returns the existing segment if found, undefined otherwise\n     */\n    private _findDuplicateSegment(\n        filePath: string,\n        startLine: number,\n        endLine: number\n    ): HighlightSegment | undefined {\n        const allSegments = this.getAllBlocks();\n\n        return allSegments.find(segment =>\n            segment.filePath === filePath &&\n            segment.startLine === startLine &&\n            segment.endLine === endLine\n        );\n    }\n\n    /**",
      "timestamp": "2025-12-30T08:15:49.147Z",
      "file": "/Users/swarit-dev/voight/src/ui/blockManager.ts"
    },
    {
      "block_no": 33,
      "line_number_start": 192,
      "line_number_end": 192,
      "code": "     * Treats the entire file as a single segment (no shadow state diffing)",
      "timestamp": "2025-12-30T08:30:30.309Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 35,
      "line_number_start": 219,
      "line_number_end": 224,
      "code": "        // Initialize shadow state with current content for future edits\n        this._changeDetector.initializeDocument(document);\n\n        // Skip empty files\n        if (document.lineCount === 0) {\n            Logger.warn(`New file is empty - skipping segment creation`);",
      "timestamp": "2025-12-30T08:30:30.309Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 37,
      "line_number_start": 228,
      "line_number_end": 247,
      "code": "        Logger.info(`Creating single segment for entire file (0-${document.lineCount - 1})`);\n\n        // Register entire file as a single segment with UI\n        if (this._blockManager) {\n            const blockId = this._blockManager.registerDetectedBlock(\n                filePath,\n                0,\n                document.lineCount - 1,\n                {\n                    blockNo: 0,\n                    detectedAt: Date.now(),\n                    linesChanged: document.lineCount,\n                    coreChangeStart: 0,\n                    coreChangeEnd: document.lineCount - 1,\n                    expandedContext: false,\n                    complexityScore: 0,\n                    isNewFile: true\n                }\n            );\n            Logger.info(`  âœ“ Registered ${blockId} as single segment for entire new file`);",
      "timestamp": "2025-12-30T08:30:30.309Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 36,
      "line_number_start": 275,
      "line_number_end": 280,
      "code": "        segments.forEach(segment => {\n            this.highlighter.removeSegment(segment.id);\n            this._segmentRepository.delete(segment.filePath, segment.startLine, segment.endLine).catch((error: Error) => {\n                Logger.error(`Failed to delete segment from repository: ${error}`);\n            });\n        });",
      "timestamp": "2025-12-30T22:42:00.950Z",
      "file": "/Users/swarit-dev/voight/src/ui/blockManager.ts"
    },
    {
      "block_no": 38,
      "line_number_start": 275,
      "line_number_end": 280,
      "code": "        segments.forEach(segment => {\n            this.highlighter.removeSegment(segment.id);\n            this._segmentRepository.delete(segment.filePath, segment.startLine, segment.endLine).catch((error: Error) => {\n                Logger.error(`Failed to delete segment from repository: ${error}`);\n            });\n        });",
      "timestamp": "2025-12-30T22:42:00.950Z",
      "file": "/Users/swarit-dev/voight/src/ui/blockManager.ts"
    },
    {
      "block_no": 40,
      "line_number_start": 275,
      "line_number_end": 280,
      "code": "        segments.forEach(segment => {\n            this.highlighter.removeSegment(segment.id);\n            this._segmentRepository.delete(segment.filePath, segment.startLine, segment.endLine).catch((error: Error) => {\n                Logger.error(`Failed to delete segment from repository: ${error}`);\n            });\n        });",
      "timestamp": "2025-12-30T22:42:00.950Z",
      "file": "/Users/swarit-dev/voight/src/ui/blockManager.ts"
    },
    {
      "block_no": 39,
      "line_number_start": 138,
      "line_number_end": 140,
      "code": "\t// Watch for files created and deleted on disk (by AI tools, external processes, etc.)\n\tconst fileSystemWatcher = vscode.workspace.createFileSystemWatcher('**/*');\n",
      "timestamp": "2025-12-30T22:42:35.854Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 41,
      "line_number_start": 172,
      "line_number_end": 191,
      "code": "\tconst fileDeleteListener = fileSystemWatcher.onDidDelete((uri) => {\n\t\tif (uri.scheme !== 'file') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst filePath = uri.fsPath;\n\t\tLogger.info(`File system: File deleted - ${filePath}`);\n\n\t\t// Remove from file registry\n\t\tfileRegistry.unregister(filePath);\n\n\t\t// Remove all segments for this file\n\t\tblockManager.removeSegmentsForFile(filePath);\n\n\t\t// Clear shadow state for this file\n\t\tcoordinator.clearFile(filePath);\n\n\t\tLogger.info(`File system: Cleaned up tracking data for deleted file`);\n\t});\n",
      "timestamp": "2025-12-30T22:42:35.854Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 41,
      "line_number_start": 238,
      "line_number_end": 246,
      "code": "     * Clear shadow state for a specific file\n     * Used when a file is deleted\n     */\n    public clearFile(filePath: string): void {\n        this._changeDetector.clearFile(filePath);\n        Logger.debug(`DetectionCoordinator: Cleared shadow state for deleted file: ${filePath}`);\n    }\n\n    /**",
      "timestamp": "2025-12-30T22:48:31.894Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 42,
      "line_number_start": 139,
      "line_number_end": 147,
      "code": "     * Clear shadow state for a specific file\n     * Used when a file is deleted\n     */\n    public clearFile(filePath: string): void {\n        this._shadowDocuments.delete(filePath);\n        Logger.debug(`ChangeDetector: Cleared shadow state for file: ${filePath}`);\n    }\n\n    /**",
      "timestamp": "2025-12-30T22:49:14.047Z",
      "file": "/Users/swarit-dev/voight/src/detection/changeDetector.ts"
    },
    {
      "block_no": 43,
      "line_number_start": 406,
      "line_number_end": 406,
      "code": "\t\tfileDeleteListener,",
      "timestamp": "2025-12-30T22:50:50.366Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 44,
      "line_number_start": 45,
      "line_number_end": 50,
      "code": "        // Check if file extension is supported\n        if (!this._isSupportedFileExtension(document.fileName)) {\n            Logger.debug(`DetectionCoordinator: Unsupported file extension: ${document.fileName}`);\n            return;\n        }\n",
      "timestamp": "2025-12-30T22:51:05.010Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 45,
      "line_number_start": 37,
      "line_number_end": 45,
      "code": "     * Check if file extension is supported\n     * Currently supports: .js, .ts, .py, .go\n     */\n    private _isSupportedFileExtension(filePath: string): boolean {\n        const supportedExtensions = ['.js', '.ts', '.py', '.go', '.tsx', '.jsx'];\n        return supportedExtensions.some(ext => filePath.endsWith(ext));\n    }\n\n    /**",
      "timestamp": "2025-12-30T22:51:17.651Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 46,
      "line_number_start": 93,
      "line_number_end": 97,
      "code": "        // Check if file extension is supported\n        if (!this._isSupportedFileExtension(filePath)) {\n            return;\n        }\n",
      "timestamp": "2025-12-30T22:51:28.406Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 47,
      "line_number_start": 205,
      "line_number_end": 210,
      "code": "        // Check if file extension is supported\n        if (!this._isSupportedFileExtension(filePath)) {\n            Logger.debug(`DetectionCoordinator: Unsupported file extension: ${filePath}`);\n            return;\n        }\n",
      "timestamp": "2025-12-30T22:51:39.309Z",
      "file": "/Users/swarit-dev/voight/src/detection/detectionCoordinator.ts"
    },
    {
      "block_no": 48,
      "line_number_start": 11,
      "line_number_end": 11,
      "code": "import { FileRegistry } from '../tracking/fileRegistry';",
      "timestamp": "2025-12-30T22:59:27.484Z",
      "file": "/Users/swarit-dev/voight/src/ui/segmentsWebviewProvider.ts"
    },
    {
      "block_no": 50,
      "line_number_start": 21,
      "line_number_end": 22,
      "code": "        private readonly _contextNotesManager: ContextNotesManager,\n        private readonly _fileRegistry: FileRegistry",
      "timestamp": "2025-12-30T22:59:27.484Z",
      "file": "/Users/swarit-dev/voight/src/ui/segmentsWebviewProvider.ts"
    },
    {
      "block_no": 50,
      "line_number_start": 406,
      "line_number_end": 417,
      "code": "        // Filter out segments from deleted files\n        const allBlocks = this._blockManager.getAllBlocks();\n        const blocks = allBlocks.filter(block => this._fileRegistry.isKnown(block.filePath));\n\n        const filteredCount = allBlocks.length - blocks.length;\n        if (filteredCount > 0) {\n            Logger.debug(`[SegmentsWebviewProvider] Filtered out ${filteredCount} segments from deleted files`);\n        }\n\n        Logger.debug(`[SegmentsWebviewProvider] Active file: ${activeFilePath || 'none'}`);\n        Logger.debug(`[SegmentsWebviewProvider] Last viewed file: ${this._lastViewedFilePath || 'none'}`);\n        Logger.debug(`[SegmentsWebviewProvider] Total blocks (after filtering): ${blocks.length}`);",
      "timestamp": "2025-12-30T22:59:50.117Z",
      "file": "/Users/swarit-dev/voight/src/ui/segmentsWebviewProvider.ts"
    },
    {
      "block_no": 51,
      "line_number_start": 274,
      "line_number_end": 276,
      "code": "        // Filter out segments from deleted files\n        const allBlocks = this._blockManager.getAllBlocks();\n        const blocks = allBlocks.filter(block => this._fileRegistry.isKnown(block.filePath));",
      "timestamp": "2025-12-30T22:59:59.245Z",
      "file": "/Users/swarit-dev/voight/src/ui/segmentsWebviewProvider.ts"
    },
    {
      "block_no": 52,
      "line_number_start": 367,
      "line_number_end": 369,
      "code": "        // Filter out segments from deleted files before grouping\n        const existingBlocks = blocks.filter(block => this._fileRegistry.isKnown(block.filePath));\n",
      "timestamp": "2025-12-30T23:00:10.348Z",
      "file": "/Users/swarit-dev/voight/src/ui/segmentsWebviewProvider.ts"
    },
    {
      "block_no": 54,
      "line_number_start": 373,
      "line_number_end": 373,
      "code": "        existingBlocks.forEach(block => {",
      "timestamp": "2025-12-30T23:00:10.348Z",
      "file": "/Users/swarit-dev/voight/src/ui/segmentsWebviewProvider.ts"
    },
    {
      "block_no": 54,
      "line_number_start": 345,
      "line_number_end": 348,
      "code": "        // Filter out segments from deleted files\n        const allBlocks = this._blockManager.getAllBlocks();\n        const blocks = allBlocks.filter(block => this._fileRegistry.isKnown(block.filePath));\n",
      "timestamp": "2025-12-30T23:00:29.938Z",
      "file": "/Users/swarit-dev/voight/src/ui/segmentsWebviewProvider.ts"
    },
    {
      "block_no": 55,
      "line_number_start": 100,
      "line_number_end": 100,
      "code": "\tconst segmentsWebviewProvider = new SegmentsWebviewProvider(context.extensionUri, blockManager, contextNotesManager, fileRegistry);",
      "timestamp": "2025-12-30T23:00:46.454Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    }
  ],
  "metadata": {
    "session": "2025-12-30T07-31-35-880Z",
    "totalBlocks": 56,
    "lastUpdated": "2025-12-30T23:00:46.455Z"
  }
}