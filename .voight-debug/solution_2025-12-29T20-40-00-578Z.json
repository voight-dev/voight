{
  "blocks": [
    {
      "block_no": 0,
      "line_number_start": 4,
      "line_number_end": 4,
      "code": "import { FileTrackingService } from '../tracking/fileTracker';",
      "timestamp": "2025-12-29T20:53:14.988Z",
      "file": "/Users/swarit-dev/voight/src/ui/blockManager.ts"
    },
    {
      "block_no": 1,
      "line_number_start": 16,
      "line_number_end": 16,
      "code": "    private _fileTrackingService?: FileTrackingService;",
      "timestamp": "2025-12-29T20:53:30.953Z",
      "file": "/Users/swarit-dev/voight/src/ui/blockManager.ts"
    },
    {
      "block_no": 3,
      "line_number_start": 20,
      "line_number_end": 24,
      "code": "        segmentRepository: ISegmentRepository,\n        fileTrackingService?: FileTrackingService\n    ) {\n        this._segmentRepository = segmentRepository;\n        this._fileTrackingService = fileTrackingService;",
      "timestamp": "2025-12-29T20:53:30.953Z",
      "file": "/Users/swarit-dev/voight/src/ui/blockManager.ts"
    },
    {
      "block_no": 3,
      "line_number_start": 107,
      "line_number_end": 107,
      "code": "     * Now persists the segment to storage and tracks the edit",
      "timestamp": "2025-12-29T20:53:44.171Z",
      "file": "/Users/swarit-dev/voight/src/ui/blockManager.ts"
    },
    {
      "block_no": 5,
      "line_number_start": 137,
      "line_number_end": 148,
      "code": "        // Track this edit in the file tracking service\n        if (this._fileTrackingService) {\n            this._fileTrackingService.recordEdit(\n                filePath,\n                startLine,\n                endLine,\n                metadata?.complexityScore\n            ).catch(error => {\n                Logger.error(`Failed to track file edit: ${error}`);\n            });\n        }\n",
      "timestamp": "2025-12-29T20:53:44.172Z",
      "file": "/Users/swarit-dev/voight/src/ui/blockManager.ts"
    },
    {
      "block_no": 5,
      "line_number_start": 13,
      "line_number_end": 13,
      "code": "import { FileTrackingService } from './tracking/fileTracker';",
      "timestamp": "2025-12-29T20:54:04.376Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 7,
      "line_number_start": 19,
      "line_number_end": 19,
      "code": "let fileTrackingService: FileTrackingService;",
      "timestamp": "2025-12-29T20:54:04.376Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 7,
      "line_number_start": 50,
      "line_number_end": 56,
      "code": "\t// Initialize file tracking service\n\tfileTrackingService = new FileTrackingService(context);\n\tLogger.info('File tracking service initialized');\n\n\t// Initialize UI layer\n\tconst highlighter = createDefaultHighlighter();\n\tblockManager = new BlockManager(highlighter, segmentRepository, fileTrackingService);",
      "timestamp": "2025-12-29T20:54:17.284Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 8,
      "line_number_start": 183,
      "line_number_end": 225,
      "code": "\tconst getTopEditedFilesCommand = vscode.commands.registerCommand('voight.getTopEditedFiles', async () => {\n\t\tconst input = await vscode.window.showInputBox({\n\t\t\tprompt: 'How many top files to show?',\n\t\t\tvalue: '10',\n\t\t\tvalidateInput: (value) => {\n\t\t\t\tconst num = parseInt(value);\n\t\t\t\tif (isNaN(num) || num < 1) {\n\t\t\t\t\treturn 'Please enter a positive number';\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst limit = parseInt(input);\n\t\tconst topFiles = await fileTrackingService.getTopFiles(limit);\n\n\t\tif (topFiles.length === 0) {\n\t\t\tvscode.window.showInformationMessage('No files have been edited by AI yet');\n\t\t\treturn;\n\t\t}\n\n\t\t// Display in quick pick\n\t\tconst items = topFiles.map(file => ({\n\t\t\tlabel: `#${file.rank} - ${vscode.workspace.asRelativePath(file.filePath)}`,\n\t\t\tdescription: `${file.editCount} edits, ${file.totalLinesChanged} lines changed`,\n\t\t\tdetail: `First: ${new Date(file.firstEditedAt).toLocaleString()} | Last: ${new Date(file.lastEditedAt).toLocaleString()}`,\n\t\t\tfile\n\t\t}));\n\n\t\tconst selected = await vscode.window.showQuickPick(items, {\n\t\t\tplaceHolder: `Top ${topFiles.length} most edited files`\n\t\t});\n\n\t\tif (selected) {\n\t\t\t// Open the file\n\t\t\tconst doc = await vscode.workspace.openTextDocument(selected.file.filePath);\n\t\t\tawait vscode.window.showTextDocument(doc);\n\t\t}\n\t});",
      "timestamp": "2025-12-29T20:54:57.868Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 10,
      "line_number_start": 183,
      "line_number_end": 225,
      "code": "\tconst getTopEditedFilesCommand = vscode.commands.registerCommand('voight.getTopEditedFiles', async () => {\n\t\tconst input = await vscode.window.showInputBox({\n\t\t\tprompt: 'How many top files to show?',\n\t\t\tvalue: '10',\n\t\t\tvalidateInput: (value) => {\n\t\t\t\tconst num = parseInt(value);\n\t\t\t\tif (isNaN(num) || num < 1) {\n\t\t\t\t\treturn 'Please enter a positive number';\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst limit = parseInt(input);\n\t\tconst topFiles = await fileTrackingService.getTopFiles(limit);\n\n\t\tif (topFiles.length === 0) {\n\t\t\tvscode.window.showInformationMessage('No files have been edited by AI yet');\n\t\t\treturn;\n\t\t}\n\n\t\t// Display in quick pick\n\t\tconst items = topFiles.map(file => ({\n\t\t\tlabel: `#${file.rank} - ${vscode.workspace.asRelativePath(file.filePath)}`,\n\t\t\tdescription: `${file.editCount} edits, ${file.totalLinesChanged} lines changed`,\n\t\t\tdetail: `First: ${new Date(file.firstEditedAt).toLocaleString()} | Last: ${new Date(file.lastEditedAt).toLocaleString()}`,\n\t\t\tfile\n\t\t}));\n\n\t\tconst selected = await vscode.window.showQuickPick(items, {\n\t\t\tplaceHolder: `Top ${topFiles.length} most edited files`\n\t\t});\n\n\t\tif (selected) {\n\t\t\t// Open the file\n\t\t\tconst doc = await vscode.workspace.openTextDocument(selected.file.filePath);\n\t\t\tawait vscode.window.showTextDocument(doc);\n\t\t}\n\t});",
      "timestamp": "2025-12-29T20:54:57.868Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 12,
      "line_number_start": 183,
      "line_number_end": 225,
      "code": "\tconst getTopEditedFilesCommand = vscode.commands.registerCommand('voight.getTopEditedFiles', async () => {\n\t\tconst input = await vscode.window.showInputBox({\n\t\t\tprompt: 'How many top files to show?',\n\t\t\tvalue: '10',\n\t\t\tvalidateInput: (value) => {\n\t\t\t\tconst num = parseInt(value);\n\t\t\t\tif (isNaN(num) || num < 1) {\n\t\t\t\t\treturn 'Please enter a positive number';\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst limit = parseInt(input);\n\t\tconst topFiles = await fileTrackingService.getTopFiles(limit);\n\n\t\tif (topFiles.length === 0) {\n\t\t\tvscode.window.showInformationMessage('No files have been edited by AI yet');\n\t\t\treturn;\n\t\t}\n\n\t\t// Display in quick pick\n\t\tconst items = topFiles.map(file => ({\n\t\t\tlabel: `#${file.rank} - ${vscode.workspace.asRelativePath(file.filePath)}`,\n\t\t\tdescription: `${file.editCount} edits, ${file.totalLinesChanged} lines changed`,\n\t\t\tdetail: `First: ${new Date(file.firstEditedAt).toLocaleString()} | Last: ${new Date(file.lastEditedAt).toLocaleString()}`,\n\t\t\tfile\n\t\t}));\n\n\t\tconst selected = await vscode.window.showQuickPick(items, {\n\t\t\tplaceHolder: `Top ${topFiles.length} most edited files`\n\t\t});\n\n\t\tif (selected) {\n\t\t\t// Open the file\n\t\t\tconst doc = await vscode.workspace.openTextDocument(selected.file.filePath);\n\t\t\tawait vscode.window.showTextDocument(doc);\n\t\t}\n\t});",
      "timestamp": "2025-12-29T20:54:57.868Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 14,
      "line_number_start": 183,
      "line_number_end": 225,
      "code": "\tconst getTopEditedFilesCommand = vscode.commands.registerCommand('voight.getTopEditedFiles', async () => {\n\t\tconst input = await vscode.window.showInputBox({\n\t\t\tprompt: 'How many top files to show?',\n\t\t\tvalue: '10',\n\t\t\tvalidateInput: (value) => {\n\t\t\t\tconst num = parseInt(value);\n\t\t\t\tif (isNaN(num) || num < 1) {\n\t\t\t\t\treturn 'Please enter a positive number';\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst limit = parseInt(input);\n\t\tconst topFiles = await fileTrackingService.getTopFiles(limit);\n\n\t\tif (topFiles.length === 0) {\n\t\t\tvscode.window.showInformationMessage('No files have been edited by AI yet');\n\t\t\treturn;\n\t\t}\n\n\t\t// Display in quick pick\n\t\tconst items = topFiles.map(file => ({\n\t\t\tlabel: `#${file.rank} - ${vscode.workspace.asRelativePath(file.filePath)}`,\n\t\t\tdescription: `${file.editCount} edits, ${file.totalLinesChanged} lines changed`,\n\t\t\tdetail: `First: ${new Date(file.firstEditedAt).toLocaleString()} | Last: ${new Date(file.lastEditedAt).toLocaleString()}`,\n\t\t\tfile\n\t\t}));\n\n\t\tconst selected = await vscode.window.showQuickPick(items, {\n\t\t\tplaceHolder: `Top ${topFiles.length} most edited files`\n\t\t});\n\n\t\tif (selected) {\n\t\t\t// Open the file\n\t\t\tconst doc = await vscode.workspace.openTextDocument(selected.file.filePath);\n\t\t\tawait vscode.window.showTextDocument(doc);\n\t\t}\n\t});",
      "timestamp": "2025-12-29T20:54:57.868Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 16,
      "line_number_start": 183,
      "line_number_end": 225,
      "code": "\tconst getTopEditedFilesCommand = vscode.commands.registerCommand('voight.getTopEditedFiles', async () => {\n\t\tconst input = await vscode.window.showInputBox({\n\t\t\tprompt: 'How many top files to show?',\n\t\t\tvalue: '10',\n\t\t\tvalidateInput: (value) => {\n\t\t\t\tconst num = parseInt(value);\n\t\t\t\tif (isNaN(num) || num < 1) {\n\t\t\t\t\treturn 'Please enter a positive number';\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst limit = parseInt(input);\n\t\tconst topFiles = await fileTrackingService.getTopFiles(limit);\n\n\t\tif (topFiles.length === 0) {\n\t\t\tvscode.window.showInformationMessage('No files have been edited by AI yet');\n\t\t\treturn;\n\t\t}\n\n\t\t// Display in quick pick\n\t\tconst items = topFiles.map(file => ({\n\t\t\tlabel: `#${file.rank} - ${vscode.workspace.asRelativePath(file.filePath)}`,\n\t\t\tdescription: `${file.editCount} edits, ${file.totalLinesChanged} lines changed`,\n\t\t\tdetail: `First: ${new Date(file.firstEditedAt).toLocaleString()} | Last: ${new Date(file.lastEditedAt).toLocaleString()}`,\n\t\t\tfile\n\t\t}));\n\n\t\tconst selected = await vscode.window.showQuickPick(items, {\n\t\t\tplaceHolder: `Top ${topFiles.length} most edited files`\n\t\t});\n\n\t\tif (selected) {\n\t\t\t// Open the file\n\t\t\tconst doc = await vscode.workspace.openTextDocument(selected.file.filePath);\n\t\t\tawait vscode.window.showTextDocument(doc);\n\t\t}\n\t});",
      "timestamp": "2025-12-29T20:54:57.868Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 18,
      "line_number_start": 183,
      "line_number_end": 225,
      "code": "\tconst getTopEditedFilesCommand = vscode.commands.registerCommand('voight.getTopEditedFiles', async () => {\n\t\tconst input = await vscode.window.showInputBox({\n\t\t\tprompt: 'How many top files to show?',\n\t\t\tvalue: '10',\n\t\t\tvalidateInput: (value) => {\n\t\t\t\tconst num = parseInt(value);\n\t\t\t\tif (isNaN(num) || num < 1) {\n\t\t\t\t\treturn 'Please enter a positive number';\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst limit = parseInt(input);\n\t\tconst topFiles = await fileTrackingService.getTopFiles(limit);\n\n\t\tif (topFiles.length === 0) {\n\t\t\tvscode.window.showInformationMessage('No files have been edited by AI yet');\n\t\t\treturn;\n\t\t}\n\n\t\t// Display in quick pick\n\t\tconst items = topFiles.map(file => ({\n\t\t\tlabel: `#${file.rank} - ${vscode.workspace.asRelativePath(file.filePath)}`,\n\t\t\tdescription: `${file.editCount} edits, ${file.totalLinesChanged} lines changed`,\n\t\t\tdetail: `First: ${new Date(file.firstEditedAt).toLocaleString()} | Last: ${new Date(file.lastEditedAt).toLocaleString()}`,\n\t\t\tfile\n\t\t}));\n\n\t\tconst selected = await vscode.window.showQuickPick(items, {\n\t\t\tplaceHolder: `Top ${topFiles.length} most edited files`\n\t\t});\n\n\t\tif (selected) {\n\t\t\t// Open the file\n\t\t\tconst doc = await vscode.workspace.openTextDocument(selected.file.filePath);\n\t\t\tawait vscode.window.showTextDocument(doc);\n\t\t}\n\t});",
      "timestamp": "2025-12-29T20:54:57.868Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 20,
      "line_number_start": 183,
      "line_number_end": 225,
      "code": "\tconst getTopEditedFilesCommand = vscode.commands.registerCommand('voight.getTopEditedFiles', async () => {\n\t\tconst input = await vscode.window.showInputBox({\n\t\t\tprompt: 'How many top files to show?',\n\t\t\tvalue: '10',\n\t\t\tvalidateInput: (value) => {\n\t\t\t\tconst num = parseInt(value);\n\t\t\t\tif (isNaN(num) || num < 1) {\n\t\t\t\t\treturn 'Please enter a positive number';\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst limit = parseInt(input);\n\t\tconst topFiles = await fileTrackingService.getTopFiles(limit);\n\n\t\tif (topFiles.length === 0) {\n\t\t\tvscode.window.showInformationMessage('No files have been edited by AI yet');\n\t\t\treturn;\n\t\t}\n\n\t\t// Display in quick pick\n\t\tconst items = topFiles.map(file => ({\n\t\t\tlabel: `#${file.rank} - ${vscode.workspace.asRelativePath(file.filePath)}`,\n\t\t\tdescription: `${file.editCount} edits, ${file.totalLinesChanged} lines changed`,\n\t\t\tdetail: `First: ${new Date(file.firstEditedAt).toLocaleString()} | Last: ${new Date(file.lastEditedAt).toLocaleString()}`,\n\t\t\tfile\n\t\t}));\n\n\t\tconst selected = await vscode.window.showQuickPick(items, {\n\t\t\tplaceHolder: `Top ${topFiles.length} most edited files`\n\t\t});\n\n\t\tif (selected) {\n\t\t\t// Open the file\n\t\t\tconst doc = await vscode.workspace.openTextDocument(selected.file.filePath);\n\t\t\tawait vscode.window.showTextDocument(doc);\n\t\t}\n\t});",
      "timestamp": "2025-12-29T20:54:57.868Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 22,
      "line_number_start": 280,
      "line_number_end": 293,
      "code": "\t\t\tvscode.window.showInformationMessage('This file has not been edited by AI yet');\n\t\t\treturn;\n\t\t}\n\n\t\tconst ranked = await fileTrackingService.getRankedFiles();\n\t\tconst rank = ranked.findIndex(f => f.filePath === filePath) + 1;\n\n\t\tconst message = `${vscode.workspace.asRelativePath(filePath)}:\nRank: #${rank} of ${ranked.length}\nEdit count: ${fileData.editCount}\nTotal lines changed: ${fileData.totalLinesChanged}\nFirst edited: ${new Date(fileData.firstEditedAt).toLocaleString()}\nLast edited: ${new Date(fileData.lastEditedAt).toLocaleString()}`;\n",
      "timestamp": "2025-12-29T20:54:57.868Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 24,
      "line_number_start": 294,
      "line_number_end": 309,
      "code": "\t\tvscode.window.showInformationMessage(message);\n\t});\n\n\t// Clear file tracking data\n\tconst clearFileTrackingCommand = vscode.commands.registerCommand('voight.clearFileTracking', async () => {\n\t\tconst result = await vscode.window.showWarningMessage(\n\t\t\t'Are you sure you want to clear all file tracking data? This cannot be undone.',\n\t\t\t'Yes', 'No'\n\t\t);\n\n\t\tif (result === 'Yes') {\n\t\t\tawait fileTrackingService.clearAll();\n\t\t\tvscode.window.showInformationMessage('File tracking data cleared');\n\t\t}\n\t});\n",
      "timestamp": "2025-12-29T20:54:57.868Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 17,
      "line_number_start": 318,
      "line_number_end": 323,
      "code": "\t\tshowFileContextsCommand,\n\t\tgetTopEditedFilesCommand,\n\t\tshowFileTrackingStatsCommand,\n\t\texportFileRankingsCommand,\n\t\tgetCurrentFileTrackingCommand,\n\t\tclearFileTrackingCommand",
      "timestamp": "2025-12-29T20:55:33.313Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 18,
      "line_number_start": 54,
      "line_number_end": 58,
      "code": "\t// Subscribe to real-time file edit events\n\tconst fileEditListener = fileTrackingService.onFileEdited((event) => {\n\t\tLogger.debug(`File edited: ${vscode.workspace.asRelativePath(event.filePath)} (edit #${event.editCount}, ${event.linesChanged} lines)`);\n\t});\n",
      "timestamp": "2025-12-29T20:55:52.082Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 19,
      "line_number_start": 328,
      "line_number_end": 329,
      "code": "\t\tclearFileTrackingCommand,\n\t\tfileEditListener",
      "timestamp": "2025-12-29T20:56:18.764Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 20,
      "line_number_start": 14,
      "line_number_end": 14,
      "code": "import { HotFilesWebviewProvider } from './ui/hotFilesWebviewProvider';",
      "timestamp": "2025-12-29T21:01:28.669Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 21,
      "line_number_start": 78,
      "line_number_end": 86,
      "code": "\t// Register hot files webview for Activity Bar sidebar\n\tconst hotFilesWebviewProvider = new HotFilesWebviewProvider(context.extensionUri, fileTrackingService);\n\tcontext.subscriptions.push(\n\t\tvscode.window.registerWebviewViewProvider(\n\t\t\tHotFilesWebviewProvider.viewType,\n\t\t\thotFilesWebviewProvider\n\t\t)\n\t);\n",
      "timestamp": "2025-12-29T21:01:37.936Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 22,
      "line_number_start": 30,
      "line_number_end": 36,
      "code": "        },\n        {\n          \"type\": \"webview\",\n          \"id\": \"voight.hotFilesView\",\n          \"name\": \"Hot Files\",\n          \"icon\": \"$(flame)\",\n          \"visibility\": \"visible\"",
      "timestamp": "2025-12-29T21:01:57.426Z",
      "file": "/Users/swarit-dev/voight/package.json"
    },
    {
      "block_no": 23,
      "line_number_start": 64,
      "line_number_end": 83,
      "code": "      },\n      {\n        \"command\": \"voight.getTopEditedFiles\",\n        \"title\": \"Voight: Show Top Edited Files\"\n      },\n      {\n        \"command\": \"voight.showFileTrackingStats\",\n        \"title\": \"Voight: Show File Tracking Statistics\"\n      },\n      {\n        \"command\": \"voight.exportFileRankings\",\n        \"title\": \"Voight: Export File Rankings\"\n      },\n      {\n        \"command\": \"voight.getCurrentFileTracking\",\n        \"title\": \"Voight: Show Current File Tracking\"\n      },\n      {\n        \"command\": \"voight.clearFileTracking\",\n        \"title\": \"Voight: Clear File Tracking Data\"",
      "timestamp": "2025-12-29T21:02:07.116Z",
      "file": "/Users/swarit-dev/voight/package.json"
    },
    {
      "block_no": 24,
      "line_number_start": 617,
      "line_number_end": 636,
      "code": "                // Show a more helpful message with action buttons\n                const action = await vscode.window.showErrorMessage(\n                    'AI provider not configured. Please add your API key in settings to enable code explanations.',\n                    'Open Settings',\n                    'View Setup Guide'\n                );\n\n                if (action === 'Open Settings') {\n                    await vscode.commands.executeCommand('workbench.action.openSettings', 'voight.ai.apiKey');\n                } else if (action === 'View Setup Guide') {\n                    const guideUri = vscode.Uri.joinPath(this._extensionUri, 'API_SETUP_GUIDE.md');\n                    try {\n                        await vscode.commands.executeCommand('markdown.showPreview', guideUri);\n                    } catch {\n                        // Fallback: just open settings if guide doesn't exist\n                        await vscode.commands.executeCommand('workbench.action.openSettings', 'voight.ai');\n                    }\n                }\n\n                throw new Error('API key not configured');",
      "timestamp": "2025-12-29T21:21:22.577Z",
      "file": "/Users/swarit-dev/voight/src/ui/segmentsWebviewProvider.ts"
    },
    {
      "block_no": 25,
      "line_number_start": 18,
      "line_number_end": 18,
      "code": "  - ðŸ“– **[View API Setup Guide](API_SETUP_GUIDE.md)** for detailed instructions",
      "timestamp": "2025-12-29T21:22:40.530Z",
      "file": "/Users/swarit-dev/voight/README.md"
    },
    {
      "block_no": 26,
      "line_number_start": 25,
      "line_number_end": 26,
      "code": "* `voight.ai.provider`: AI provider for code explanations (`gemini`, `anthropic`, or `openai`)\n* `voight.ai.apiKey`: API key for your chosen AI provider ([Setup Guide](API_SETUP_GUIDE.md))",
      "timestamp": "2025-12-29T21:22:49.766Z",
      "file": "/Users/swarit-dev/voight/README.md"
    },
    {
      "block_no": 28,
      "line_number_start": 30,
      "line_number_end": 31,
      "code": "> **ðŸ’¡ Need help setting up AI explanations?** Check out the [API Setup Guide](API_SETUP_GUIDE.md) for step-by-step instructions.\n",
      "timestamp": "2025-12-29T21:22:49.766Z",
      "file": "/Users/swarit-dev/voight/README.md"
    },
    {
      "block_no": 28,
      "line_number_start": 33,
      "line_number_end": 34,
      "code": "    DISMISSED = 'dismissed',   // User dismissed/ignored\n    STALE = 'stale'            // Code has changed, segment may be outdated",
      "timestamp": "2025-12-29T21:31:06.965Z",
      "file": "/Users/swarit-dev/voight/src/ui/highlighter.ts"
    },
    {
      "block_no": 29,
      "line_number_start": 293,
      "line_number_end": 298,
      "code": "        }],\n        [SegmentState.STALE, {\n            backgroundColor: 'rgba(0, 0, 0, 0)',  // No background highlight\n            borderColor: 'rgba(255, 165, 0, 0.5)',  // Orange for stale/outdated\n            borderWidth: '0 0 0 3px',\n            borderStyle: 'dashed'  // Dashed to indicate uncertainty",
      "timestamp": "2025-12-29T21:31:36.154Z",
      "file": "/Users/swarit-dev/voight/src/ui/highlighter.ts"
    },
    {
      "block_no": 30,
      "line_number_start": 5,
      "line_number_end": 5,
      "code": "import { StaleDetector } from '../detection/staleDetector';",
      "timestamp": "2025-12-29T21:32:37.011Z",
      "file": "/Users/swarit-dev/voight/src/ui/blockManager.ts"
    },
    {
      "block_no": 31,
      "line_number_start": 232,
      "line_number_end": 319,
      "code": "     * Force remove a block, even if it's starred or has context notes\n     * Includes confirmation for important segments\n     */\n    public async forceRemove(blockId: string, skipConfirmation: boolean = false): Promise<boolean> {\n        const segment = this.highlighter.getSegment(blockId);\n        if (!segment) {\n            Logger.warn(`Cannot force remove: segment ${blockId} not found`);\n            return false;\n        }\n\n        // Check if segment has important data\n        const isStarred = segment.metadata?.starred === true;\n        const hasContextNote = segment.metadata?.contextNote && segment.metadata.contextNote.trim().length > 0;\n        const isImportant = isStarred || hasContextNote;\n\n        // Show confirmation for important segments unless skipped\n        if (isImportant && !skipConfirmation) {\n            const details: string[] = [];\n            if (isStarred) {\n                details.push('starred');\n            }\n            if (hasContextNote) {\n                details.push('has context notes');\n            }\n\n            const result = await vscode.window.showWarningMessage(\n                `This segment is ${details.join(' and ')}. Are you sure you want to permanently remove it?`,\n                { modal: true },\n                'Remove',\n                'Cancel'\n            );\n\n            if (result !== 'Remove') {\n                return false;\n            }\n        }\n\n        // Perform removal\n        this.remove(blockId);\n        Logger.info(`Force removed segment ${blockId} (important: ${isImportant})`);\n        return true;\n    }\n\n    /**\n     * Force remove all stale segments\n     * Useful for cleaning up outdated segments\n     */\n    public async forceRemoveAllStale(): Promise<number> {\n        const staleSegments = this.highlighter.getSegmentsByState(SegmentState.STALE);\n\n        if (staleSegments.length === 0) {\n            vscode.window.showInformationMessage('No stale segments to remove');\n            return 0;\n        }\n\n        // Count important segments\n        const importantCount = staleSegments.filter(s =>\n            s.metadata?.starred || (s.metadata?.contextNote && s.metadata.contextNote.trim().length > 0)\n        ).length;\n\n        // Show confirmation\n        const message = importantCount > 0\n            ? `Remove ${staleSegments.length} stale segments? (${importantCount} have stars or context notes)`\n            : `Remove ${staleSegments.length} stale segments?`;\n\n        const result = await vscode.window.showWarningMessage(\n            message,\n            { modal: true },\n            'Remove All',\n            'Cancel'\n        );\n\n        if (result !== 'Remove All') {\n            return 0;\n        }\n\n        // Remove all stale segments\n        let removedCount = 0;\n        for (const segment of staleSegments) {\n            await this.forceRemove(segment.id, true); // Skip individual confirmations\n            removedCount++;\n        }\n\n        vscode.window.showInformationMessage(`Removed ${removedCount} stale segments`);\n        return removedCount;\n    }\n\n    /**",
      "timestamp": "2025-12-29T21:40:22.461Z",
      "file": "/Users/swarit-dev/voight/src/ui/blockManager.ts"
    },
    {
      "block_no": 32,
      "line_number_start": 341,
      "line_number_end": 341,
      "code": "        stale: number;",
      "timestamp": "2025-12-29T21:40:44.151Z",
      "file": "/Users/swarit-dev/voight/src/ui/blockManager.ts"
    },
    {
      "block_no": 34,
      "line_number_start": 348,
      "line_number_end": 349,
      "code": "                   this.highlighter.getSegmentsByState(SegmentState.DISMISSED).length +\n                   this.highlighter.getSegmentsByState(SegmentState.STALE).length,",
      "timestamp": "2025-12-29T21:40:44.151Z",
      "file": "/Users/swarit-dev/voight/src/ui/blockManager.ts"
    },
    {
      "block_no": 36,
      "line_number_start": 354,
      "line_number_end": 355,
      "code": "            dismissed: this.highlighter.getSegmentsByState(SegmentState.DISMISSED).length,\n            stale: this.highlighter.getSegmentsByState(SegmentState.STALE).length",
      "timestamp": "2025-12-29T21:40:44.151Z",
      "file": "/Users/swarit-dev/voight/src/ui/blockManager.ts"
    },
    {
      "block_no": 35,
      "line_number_start": 315,
      "line_number_end": 329,
      "code": "\t// Force remove all stale segments\n\tconst forceRemoveStaleSegmentsCommand = vscode.commands.registerCommand('voight.forceRemoveStaleSegments', async () => {\n\t\tconst stats = blockManager.getStats();\n\n\t\tif (stats.stale === 0) {\n\t\t\tvscode.window.showInformationMessage('No stale segments to remove');\n\t\t\treturn;\n\t\t}\n\n\t\tconst removed = await blockManager.forceRemoveAllStale();\n\t\tif (removed > 0) {\n\t\t\tLogger.info(`Force removed ${removed} stale segments`);\n\t\t}\n\t});\n",
      "timestamp": "2025-12-29T21:41:03.565Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 36,
      "line_number_start": 344,
      "line_number_end": 344,
      "code": "\t\tforceRemoveStaleSegmentsCommand,",
      "timestamp": "2025-12-29T21:41:15.583Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    },
    {
      "block_no": 37,
      "line_number_start": 77,
      "line_number_end": 80,
      "code": "      },\n      {\n        \"command\": \"voight.forceRemoveStaleSegments\",\n        \"title\": \"Voight: Force Remove All Stale Segments\"",
      "timestamp": "2025-12-29T21:41:26.367Z",
      "file": "/Users/swarit-dev/voight/package.json"
    },
    {
      "block_no": 38,
      "line_number_start": 119,
      "line_number_end": 119,
      "code": "\t\t\t`Blocks: ${stats.total} total | ${stats.detected} detected | ${stats.reviewed} reviewed | ${stats.flagged} flagged | ${stats.accepted} accepted | ${stats.stale} stale`",
      "timestamp": "2025-12-29T21:41:44.695Z",
      "file": "/Users/swarit-dev/voight/src/extension.ts"
    }
  ],
  "metadata": {
    "session": "2025-12-29T20-40-00-578Z",
    "totalBlocks": 39,
    "lastUpdated": "2025-12-29T21:41:44.695Z"
  }
}